Script started on 2021-02-25 19:19:55-05:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="157" LINES="85"]
kmoshie1@remote07:~/i471a/submit/lab1$ cd exercises/q[K
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ ls
01-regex  02-lexer  03-calc  04-ast  ast  calc	lexer  regex
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ cd[K[Kcd regex/
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ls
data.txt  lex1.mjs  lexer.mjs  table-lexer.mjs
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ./lexer.mjs 
usage: lexer.mjs RE_TABLE_FILE INPUT_FILE
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ./lexer.mjs  [Kdata.txt [K[K[K[K[K[K[K[K[Klexer[K[K1.mjs data.txt 
Token { kind: [32m'INT'[39m, lexeme: [32m'21'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'23'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'A'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'34'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'_'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'22'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'I'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'D'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'_'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'44'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'/'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'/'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'a'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m's'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'd'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m's'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'd'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'f'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m's'[39m }
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ls
data.txt  lex1.mjs  lexer.mjs  table-lexer.mjs
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ cp lex1.mjs lex2.[K.mjs
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ls
data.txt  lex1.mjs  lex2.mjs  lexer.mjs  table-lexer.mjs
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ vim lex2.mjs 
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"lex2.mjs" 5L, 159C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33mexport[m [33mdefault[m [36m{[m
  $Ignore: /[36m\[ms+/,  [34m//this will be ignored.[m
  INT: /[36m\[md+/,      [34m//token with kind INT        [m
  CHAR: /./,[7C[34m//single char: must be last[m
[36m}[m;
[1m[34m~                                                                                                                                                            [7;1H~                                                                                                                                                            [8;1H~                                                                                                                                                            [9;1H~                                                                                                                                                            [10;1H~                                                                                                                                                            [11;1H~                                                                                                                                                            [12;1H~                                                                                                                                                            [13;1H~                                                                                                                                                            [14;1H~                                                                                                                                                            [15;1H~                                                                                                                                                            [16;1H~                                                                                                                                                            [17;1H~                                                                                                                                                            [18;1H~                                                                                                                                                            [19;1H~                                                                                                                                                            [20;1H~                                                                                                                                                            [21;1H~                                                                                                                                                            [22;1H~                                                                                                                                                            [23;1H~                                                                                                                                                            [24;1H~                                                                                                                                                            [25;1H~                                                                                                                                                            [26;1H~                                                                                                                                                            [27;1H~                                                                                                                                                            [28;1H~                                                                                                                                                            [29;1H~                                                                                                                                                            [30;1H~                                                                                                                                                            [31;1H~                                                                                                                                                            [32;1H~                                                                                                                                                            [33;1H~                                                                                                                                                            [34;1H~                                                                                                                                                            [35;1H~                                                                                                                                                            [36;1H~                                                                                                                                                            [37;1H~                                                                                                                                                            [38;1H~                                                                                                                                                            [39;1H~                                                                                                                                                            [40;1H~                                                                                                                                                            [41;1H~                                                                                                                                                            [42;1H~                                                                                                                                                            [43;1H~                                                                                                                                                            [44;1H~                                                                                                                                                            [45;1H~                                                                                                                                                            [46;1H~                                                                                                                                                            [47;1H~                                                                                                                                                            [48;1H~                                                                                                                                                            [49;1H~                                                                                                                                                            [50;1H~                                                                                                                                                            [51;1H~                                                                                                                                                            [52;1H~                                                                                                                                                            [53;1H~                                                                                                                                                            [54;1H~                                                                                                                                                            [55;1H~                                                                                                                                                            [56;1H~                                                                                                                                                            [57;1H~                                                                                                                                                            [58;1H~                                                                                                                                                            [59;1H~                                                                                                                                                            [60;1H~                                                                                                                                                            [61;1H~                                                                                                                                                            [62;1H~                                                                                                                                                            [63;1H~                                                                                                                                                            [64;1H~                                                                                                                                                            [65;1H~                                                                                                                                                            [66;1H~                                                                                                                                                            [67;1H~                                                                                                                                                            [68;1H~                                                                                                                                                            [69;1H~                                                                                                                                                            [70;1H~                                                                                                                                                            [71;1H~                                                                                                                                                            [72;1H~                                                                                                                                                            [73;1H~                                                                                                                                                            [74;1H~                                                                                                                                                            [75;1H~                                                                                                                                                            [76;1H~                                                                                                                                                            [77;1H~                                                                                                                                                            [78;1H~                                                                                                                                                            [79;1H~                                                                                                                                                            [80;1H~                                                                                                                                                            [81;1H~                                                                                                                                                            [82;1H~                                                                                                                                                            [83;1H~                                                                                                                                                            [84;1H~                                                                                                                                                            [m[85;140H3,21[10CAll[3;21H[?25h[?1000l[?1002h[?25l[85;142H44[3;44H[?25h[?25l[85;140H2,42[2;42H[?25h[?25l[85;130Ha[2;42H[85;130H [2;43H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H2,43[10CAll[2;43H[?25h[?25l[3;84r[3;1H[L[1;85r[85;140H[K[85;140H3,2-9[9CAll[3;9H[?25h[?25l[85;142H1  [3;1H[?25h[?25l[2;84r[84;1H
[1;85r[2;3H$Ignore: /[36m\[ms+/,  [34m//this will be ignored.[m[84;1H[1m[34m~                                                                                                                                                            [m[85;140H[K[85;140H2,43[10CAll[2;43H[?25h[?25l[3;84r[3;1H[L[1;85r[85;140H[K[85;140H3,2-9[9CAll[3;9H[?25h[?25l[85;142H1  [3;1H[?25h[?25l[85;142H2[3;2H[?25h[?25l[85;142H3[3;3H[?25h[?25lI[85;142H4[3;4H[?25h[?25lD[85;142H5[3;5H[?25h[?25l:[85;142H6[3;6H[?25h[?25l[85;142H7[3;7H[?25h[?25l/[85;142H8[3;8H[?25h[?25l[36m[[m[85;142H9[3;9H[?25h[?25la[85;142H10[3;10H[?25h[?25l-[85;143H1[3;11H[?25h[?25lz[85;143H2[3;12H[?25h[?25lA[85;143H3[3;13H[?25h[?25l-[85;143H4[3;14H[?25h[?25lz[85;143H5[3;15H[?25h[?25l[3;14H[K[85;143H4[3;14H[?25h[?25lZ[85;143H5[3;15H[?25h[?25l_[85;143H6[3;16H[?25h[?25l[36m][m[3;8H[36m[46m[[7C][m[85;143H7[3;17H[?25h[?25l[36m[[3;8H[[7C][m[85;143H8[3;18H[?25h[?25l[36m\[m[85;143H9[3;19H[?25h[?25lw[85;142H20[3;20H[?25h[?25l[36m][m[36m[46m[[2C][m[85;143H1[3;21H[?25h[?25l+[36m[\[mw[36m][m[85;143H2[3;22H[?25h[?25l/[85;143H3[3;23H[?25h[?25l,[85;143H4[3;24H[?25h[85;1H[K[3;23H[?25l[85;130H^[[3;23H[85;130H  [3;24H[85;140H3,23[10CAll[3;23H[?25h[?25l[85;130H:[3;23H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"lex2.mjs" 6L, 183C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ vim lex2.mjs ls[Kcp lex1.mjs lex2.mjsls[K./lexer.mjs lex1.mjs data.txt [1P[1@2
Token { kind: [32m'INT'[39m, lexeme: [32m'21'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'23'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'A34'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'_22'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'ID_44'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'/'[39m }
Token { kind: [32m'CHAR'[39m, lexeme: [32m'/'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'asd'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'sdfs'[39m }
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ ./lexer.mjs lex2.mjs data.txt [17Pvim lex2.mjs[Cls[Kvim lex2.mjs ls[Kcp lex1.mjs lex2.mjsls[Kcp lex1.mjs lex2.mjs[1P.mjs3.mjs[C[1P[1@2
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ cp lex2.mjs lex3.mjs./lexer.mjs lex2.mjs data.txt [17Pvim lex2.mjs[C[1P[1@3
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"lex3.mjs" 6L, 183C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33mexport[m [33mdefault[m [36m{[m
  $Ignore: /[36m\[ms+/,  [34m//this will be ignored.[m
  ID: /[36m[[ma-zA-Z_[36m][\[mw[36m][m+/,
  INT: /[36m\[md+/,      [34m//token with kind INT        [m
  CHAR: /./,[7C[34m//single char: must be last[m
[36m}[m;
[1m[34m~                                                                                                                                                            [8;1H~                                                                                                                                                            [9;1H~                                                                                                                                                            [10;1H~                                                                                                                                                            [11;1H~                                                                                                                                                            [12;1H~                                                                                                                                                            [13;1H~                                                                                                                                                            [14;1H~                                                                                                                                                            [15;1H~                                                                                                                                                            [16;1H~                                                                                                                                                            [17;1H~                                                                                                                                                            [18;1H~                                                                                                                                                            [19;1H~                                                                                                                                                            [20;1H~                                                                                                                                                            [21;1H~                                                                                                                                                            [22;1H~                                                                                                                                                            [23;1H~                                                                                                                                                            [24;1H~                                                                                                                                                            [25;1H~                                                                                                                                                            [26;1H~                                                                                                                                                            [27;1H~                                                                                                                                                            [28;1H~                                                                                                                                                            [29;1H~                                                                                                                                                            [30;1H~                                                                                                                                                            [31;1H~                                                                                                                                                            [32;1H~                                                                                                                                                            [33;1H~                                                                                                                                                            [34;1H~                                                                                                                                                            [35;1H~                                                                                                                                                            [36;1H~                                                                                                                                                            [37;1H~                                                                                                                                                            [38;1H~                                                                                                                                                            [39;1H~                                                                                                                                                            [40;1H~                                                                                                                                                            [41;1H~                                                                                                                                                            [42;1H~                                                                                                                                                            [43;1H~                                                                                                                                                            [44;1H~                                                                                                                                                            [45;1H~                                                                                                                                                            [46;1H~                                                                                                                                                            [47;1H~                                                                                                                                                            [48;1H~                                                                                                                                                            [49;1H~                                                                                                                                                            [50;1H~                                                                                                                                                            [51;1H~                                                                                                                                                            [52;1H~                                                                                                                                                            [53;1H~                                                                                                                                                            [54;1H~                                                                                                                                                            [55;1H~                                                                                                                                                            [56;1H~                                                                                                                                                            [57;1H~                                                                                                                                                            [58;1H~                                                                                                                                                            [59;1H~                                                                                                                                                            [60;1H~                                                                                                                                                            [61;1H~                                                                                                                                                            [62;1H~                                                                                                                                                            [63;1H~                                                                                                                                                            [64;1H~                                                                                                                                                            [65;1H~                                                                                                                                                            [66;1H~                                                                                                                                                            [67;1H~                                                                                                                                                            [68;1H~                                                                                                                                                            [69;1H~                                                                                                                                                            [70;1H~                                                                                                                                                            [71;1H~                                                                                                                                                            [72;1H~                                                                                                                                                            [73;1H~                                                                                                                                                            [74;1H~                                                                                                                                                            [75;1H~                                                                                                                                                            [76;1H~                                                                                                                                                            [77;1H~                                                                                                                                                            [78;1H~                                                                                                                                                            [79;1H~                                                                                                                                                            [80;1H~                                                                                                                                                            [81;1H~                                                                                                                                                            [82;1H~                                                                                                                                                            [83;1H~                                                                                                                                                            [84;1H~                                                                                                                                                            [m[85;140H2,26[10CAll[2;26H[?25h[?1000l[?1002h[?25l[85;130H~@k[2;26H[85;130H   [2;25H[85;143H5[2;25H[?25h[?25l[85;130H~@k[2;25H[85;130H   [2;24H[85;143H4[2;24H[?25h[?25l[85;130H~@k[2;24H[85;130H   [2;23H[85;143H3[2;23H[?25h[?25l[85;130H~@k[2;23H[85;130H   [2;22H[85;143H2[2;22H[?25h[?25l[85;130H~@k[2;22H[85;130H   [2;21H[85;143H1[2;21H[?25h[?25l[85;130H~@k[2;21H[85;130H   [2;20H[85;143H0[2;20H[?25h[?25l[85;130H~@k[2;20H[85;130H   [2;19H[85;142H19[2;19H[?25h[?25l[85;130H~@k[2;19H[85;130H   [2;18H[85;143H8[2;18H[?25h[?25l[85;130H~@k[2;18H[85;130H   [2;17H[85;143H7[2;17H[?25h[?25l[85;130H~@k[2;17H[85;130H   [2;16H[85;143H6[2;16H[?25h[?25l[85;130H~@k[2;16H[85;130H   [2;15H[85;143H5[2;15H[?25h[?25l[85;130Ha[2;15H[85;130H [2;16H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H2,16[10CAll[2;16H[?25h[?25l|/,  [1C[34m/this will be ignored.[m[85;143H7[2;17H[?25h[?25l[36m[[m/,  [1C[34m/this will be ignored.[m[85;143H8[2;18H[?25h[?25l[36m\[m/,  [1C[34m/this will be ignored.[m[85;143H9[2;19H[?25h[?25l[34m//,  //this will be ignored.[m[85;142H20[2;20H[?25h[?25l/[36m][m/,  [1C[34m/this will be ignored.[m[2;17H[36m[46m[[2C][m[85;143H1[2;21H[?25h[?25l[36m[[m/,  [1C[34m/this will be ignored.[m[2;17H[36m[\[m/[36m][m[85;143H2[2;22H[?25h[?25l[36m\[m/,  [1C[34m/this will be ignored.[m[85;143H3[2;23H[?25h[?25l[34m//,  //this will be ignored.[m[85;143H4[2;24H[?25h[?25l/[36m][m/,  [1C[34m/this will be ignored.[m[2;21H[36m[46m[[2C][m[85;143H5[2;25H[?25h[?25l./,  [1C[34m/this will be ignored.[m[2;21H[36m[\[m/[36m][m[85;143H6[2;26H[?25h[?25l*/,  [1C[34m/this will be ignored.[m[85;143H7[2;27H[?25h[85;1H[K[2;26H[?25l[85;130H^[[2;26H[85;130H  [2;27H[85;140H2,26[10CAll[2;26H[?25h[?25l[85;130H:[2;26H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"lex3.mjs" 6L, 194C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ vim lex3.mjs cp lex2.mjs lex3.mjs./lexer.mjs lex2.mjs data.txt [1P[1@3
Token { kind: [32m'INT'[39m, lexeme: [32m'21'[39m }
Token { kind: [32m'INT'[39m, lexeme: [32m'23'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'A34'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'_22'[39m }
Token { kind: [32m'ID'[39m, lexeme: [32m'ID_44'[39m }
kmoshie1@remote07:~/i471a/submit/lab1/exercises/regex$ d ..[K[K[K[Kcd ..
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ cd ..[Kcd ..
kmoshie1@remote07:~/i471a/submit/lab1$ ls
exercises  lab1.LOG
kmoshie1@remote07:~/i471a/submit/lab1$ git [K[K[K[Kgit branch
[?1h=  lab0[m[m
* [32mlab1[m[m
  main[m[m
  master[m[m
[K[?1l>kmoshie1@remote07:~/i471a/submit/lab1$ git add .
kmoshie1@remote07:~/i471a/submit/lab1$ git comm[Kmit '[K0[K-m "first [K exc[Kerce[Kise dio[K[Kone"
[lab1 74cd2ea] first exercise done
 24 files changed, 547 insertions(+), 6642 deletions(-)
 create mode 120000 submit/lab1/exercises/01-regex
 create mode 120000 submit/lab1/exercises/02-lexer
 create mode 120000 submit/lab1/exercises/03-calc
 create mode 120000 submit/lab1/exercises/04-ast
 create mode 100755 submit/lab1/exercises/ast/ast.py
 create mode 100644 submit/lab1/exercises/ast/data.json
 create mode 100644 submit/lab1/exercises/ast/data.txt
 create mode 100644 submit/lab1/exercises/ast/expn-data.json
 create mode 100644 submit/lab1/exercises/ast/expn-data.txt
 create mode 100755 submit/lab1/exercises/calc/calc.py
 create mode 100644 submit/lab1/exercises/calc/data.txt
 create mode 100644 submit/lab1/exercises/calc/expn-data.txt
 create mode 120000 submit/lab1/exercises/lexer/data.txt
 create mode 100755 submit/lab1/exercises/lexer/lexer.mjs
 create mode 100755 submit/lab1/exercises/lexer/lexer.py
 create mode 100644 submit/lab1/exercises/regex/data.txt
 create mode 100644 submit/lab1/exercises/regex/lex1.mjs
 create mode 100644 submit/lab1/exercises/regex/lex2.mjs
 create mode 100644 submit/lab1/exercises/regex/lex3.mjs
 create mode 100755 submit/lab1/exercises/regex/lexer.mjs
 create mode 100644 submit/lab1/exercises/regex/table-lexer.mjs
 rewrite submit/lab1/lab1.LOG (97%)
kmoshie1@remote07:~/i471a/submit/lab1$ git [K[K[K[Kls
exercises  lab1.LOG
kmoshie1@remote07:~/i471a/submit/lab1$ exit

Script done on 2021-02-25 19:24:19-05:00 [COMMAND_EXIT_CODE="0"]
Script started on 2021-02-25 19:27:14-05:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="157" LINES="85"]
kmoshie1@remote07:~/i471a/submit/lab1$ cd exercises/lexer/
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ ls
data.txt  lexer.mjs  lexer.py
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ ./lexer.py
usage: ./lexer.py DATA_FILE
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ ./lexer.py data.txt 
Token(kind='INT', lexeme='21')
Token(kind='INT', lexeme='23')
Token(kind='A', lexeme='A')
Token(kind='INT', lexeme='34')
Token(kind='_', lexeme='_')
Token(kind='INT', lexeme='22')
Token(kind='I', lexeme='I')
Token(kind='D', lexeme='D')
Token(kind='_', lexeme='_')
Token(kind='INT', lexeme='44')
Token(kind='/', lexeme='/')
Token(kind='/', lexeme='/')
Token(kind='a', lexeme='a')
Token(kind='s', lexeme='s')
Token(kind='d', lexeme='d')
Token(kind='s', lexeme='s')
Token(kind='d', lexeme='d')
Token(kind='f', lexeme='f')
Token(kind='s', lexeme='s')
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ ./lexer.py data.txt [Kls[K./lexer.py data.txt [Kvim lexer.py 
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"lexer.py" 57L, 1633C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[34m#!/usr/bin/env python3[m

[35mimport[m re
[35mimport[m sys
[35mfrom[m collections [35mimport[m namedtuple

[34m#Using the next_match() function provides a workaround for the fact
#that Python 3.7 does not support assignment expressions.  In fact,
#the clumsy nested if-then-else handling in exactly this situation of
#regex matching is cited as part of the rationale for the recent
#addition of assignment expressions using the `:=` walrus operator to
#Python 3.8.
#<https://www.python.org/dev/peps/pep-0572/#the-importance-of-real-code>


#returns pair containing regex match-object and token kind.  If token
#should be ignored, kind should be returned as None.
#note that m.group() gives lexeme after a successful match[m
[33mdef[m [36mnext_match[m(text):
    m = re.compile([31mr'\s+'[m).match(text)
    [33mif[m (m): [33mreturn[m (m, [36mNone[m)  [34m#None kind means ignore[m[23;5Hm = re.compile([31mr'\d+'[m).match(text)
    [33mif[m (m): [33mreturn[m (m, [31m'INT'[m)[26;5Hm = re.compile([31mr'.'[m).match(text)  [34m#must be last: match any char[m
    [33mif[m (m): [33mreturn[m (m, m.group())


[33mdef[m [36mscan[m(text):
    tokens = []
    [33mwhile[m ([36mlen[m(text) > [31m0[m):[33;9H(match, kind) = next_match(text)[34;9Hlexeme = match.group()[35;9H[33mif[m (kind): tokens.append(Token(kind, lexeme))[36;9Htext = text[[36mlen[m(lexeme):]
    [33mreturn[m tokens

[33mdef[m [36mmain[m():
    [33mif[m ([36mlen[m(sys.argv) != [31m2[m): usage();
    contents = readFile(sys.argv[[31m1[m]);
    tokens = scan(contents)
    [33mfor[m t [33min[m tokens: [36mprint[m(t)

[33mdef[m [36mreadFile[m(path):
    [33mwith[m [36mopen[m(path, [31m'r'[m) [33mas[m [36mfile[m:[47;9Hcontent = [36mfile[m.read()
    [33mreturn[m content

Token = namedtuple([31m'Token'[m, [[31m'kind'[m, [31m'lexeme'[m])

[33mdef[m [36musage[m():
    [36mprint[m(f[31m'usage: {sys.argv[0]} DATA_FILE'[m)
    sys.exit([31m1[m)

[33mif[m __name__ == [31m"__main__"[m:
    main()
[1m[34m~                                                                                                                                                            [59;1H~                                                                                                                                                            [60;1H~                                                                                                                                                            [61;1H~                                                                                                                                                            [62;1H~                                                                                                                                                            [63;1H~                                                                                                                                                            [64;1H~                                                                                                                                                            [65;1H~                                                                                                                                                            [66;1H~                                                                                                                                                            [67;1H~                                                                                                                                                            [68;1H~                                                                                                                                                            [69;1H~                                                                                                                                                            [70;1H~                                                                                                                                                            [71;1H~                                                                                                                                                            [72;1H~                                                                                                                                                            [73;1H~                                                                                                                                                            [74;1H~                                                                                                                                                            [75;1H~                                                                                                                                                            [76;1H~                                                                                                                                                            [77;1H~                                                                                                                                                            [78;1H~                                                                                                                                                            [79;1H~                                                                                                                                                            [80;1H~                                                                                                                                                            [81;1H~                                                                                                                                                            [82;1H~                                                                                                                                                            [83;1H~                                                                                                                                                            [84;1H~                                                                                                                                                            [m[85;140H43,20[9CAll[43;20H[?25h[?1000l[?1002h[?25l[85;130Hl[43;20H[85;130H [43;21H[85;144H1[43;21H[?25h[?25l[85;130H~@k[43;21H[85;130H   [43;20H[85;144H0[43;20H[?25h[?25l[85;130Ha[43;20H[85;130H [43;21H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H43,21[9CAll[43;21H[?25h[?25l[85;141H2[42;21H[?25h[?25l[85;141H1[41;21H[?25h[?25l[40;12H[46m([8C)[m[85;141H0[40;21H[?25h[?25l[40;12H([8C)[85;140H39,12[39;12H[?25h[?25l[85;141H8,1 [38;1H[?25h[?25l[85;141H7,18[37;18H[?25h[?25l[36;20H[46m[[12C][m[85;141H6,21[36;21H[?25h[?25l[[12C][85;141H5[35;21H[?25h[?25l[85;141H4[34;21H[?25h[?25l[33;9H[46m([11C)[m[85;141H3[33;21H[?25h[?25l[32;15H[46m([mtext[46m)[m[33;9H([11C)[85;141H2[32;21H[?25h[?25l[31;14H[46m[][m[32;15H(text)[85;141H1,16[31;16H[?25h[?25l[32;84r[32;1H[L[1;85r[85;140H[K[85;140H32,5[10CAll[31;14H[]
    [?25h[?25lo[85;143H6[32;6H[?25h[?25lm[85;143H7[32;7H[?25h[?25lm[85;143H8[32;8H[?25h[?25le[85;143H9[32;9H[?25h[?25ln[85;143H10[32;10H[?25h[?25lt[85;144H1[32;11H[?25h[?25l[32;10H[K[85;144H0[32;10H[?25h[?25l[32;9H[K[85;143H9 [32;9H[?25h[?25l[32;8H[K[85;143H8[32;8H[?25h[?25l[32;7H[K[85;143H7[32;7H[?25h[?25l[32;6H[K[85;143H6[32;6H[?25h[?25l[32;5H[K[85;143H5[32;5H[?25h[?25lc[85;143H6[32;6H[?25h[?25lo[85;143H7[32;7H[?25h[?25lm[85;143H8[32;8H[?25h[?25lm[85;143H9[32;9H[?25h[?25le[85;143H10[32;10H[?25h[?25ln[85;144H1[32;11H[?25h[?25lt[85;144H2[32;12H[?25h[?25l[85;144H3[32;13H[?25h[?25l=[85;144H4[32;14H[?25h[?25l[85;144H5[32;15H[?25h[?25l[31m0[m[85;144H6[32;16H[?25h[?25l[33;84r[33;1H[L[1;85r[85;140H[K[85;140H33,5[10CAll[33;5H[?25h[?25lt[85;143H6[33;6H[?25h[?25l[33;5H[K[85;143H5[33;5H[?25h[?25lt[85;143H6[33;6H[?25h[?25le[85;143H7[33;7H[?25h[?25lm[85;143H8[33;8H[?25h[?25lp[85;143H9[33;9H[?25h[?25l[85;143H10[33;10H[?25h[?25l=[85;144H1[33;11H[?25h[?25l[85;144H2[33;12H[?25h[?25lt[85;144H3[33;13H[?25h[?25lr[85;144H4[33;14H[?25h[?25lu[85;144H5[33;15H[?25h[?25le[85;144H6[33;16H[?25h[?25l[33;15H[K[85;144H5[33;15H[?25h[?25l[33;14H[K[85;144H4[33;14H[?25h[?25l[33;13H[K[85;144H3[33;13H[?25h[?25l[33;12H[K[85;144H2[33;12H[?25h[?25lT[85;144H3[33;13H[?25h[?25l[33;12H[K[85;144H2[33;12H[?25h[?25lF[85;144H3[33;13H[?25h[?25la[85;144H4[33;14H[?25h[?25ll[85;144H5[33;15H[?25h[?25ls[85;144H6[33;16H[?25h[?25l[36mFalse[m[85;144H7[33;17H[?25h[?25l[85;141H4[34;17H[?25h[?25l[85;141H5[35;17H[?25h[?25l[85;141H6[36;17H[?25h[?25l[85;144H8[36;18H[?25h[?25l[85;144H9[36;19H[?25h[?25l[85;143H20[36;20H[?25h[?25l[85;144H1[36;21H[?25h[?25l[85;144H2[36;22H[?25h[?25l[85;144H3[36;23H[?25h[?25l[85;144H4[36;24H[?25h[?25l[85;144H5[36;25H[?25h[?25l[85;144H6[36;26H[?25h[?25l[85;144H7[36;27H[?25h[?25l[85;144H8[36;28H[?25h[?25lp[46m()[m[85;144H9[36;29H[?25h[?25l[85;143H30[36;30H[?25h[?25l[85;144H1[36;31H[?25h[?25l[37;84r[37;1H[L[1;85r[85;140H[K[85;140H37,9[10CAll[36;29H()[37;9H[?25h[?25l[85;143H5[37;5H[?25h[?25l[85;143H1[37;1H[?25h[?25l[36;84r[84;1H
[1;85r[36;9Hlexeme = match.group()[84;1H[1m[34m~                                                                                                                                                            [m[85;140H[K[85;140H36,31[9CAll[36;29H[46m()[?25h[?25l[m()[85;141H7[37;31H[?25h[?25l[38;24H[46m([mlexeme[46m)[m[85;141H8[38;31H[?25h[?25l[38;24H(lexeme)[85;144H0[38;30H[?25h[?25l[85;141H7[37;30H[?25h[?25l[85;143H29[37;29H[?25h[?25l[85;144H8[37;28H[?25h[?25l[85;144H7[37;27H[?25h[?25l[85;144H6[37;26H[?25h[?25l[85;144H5[37;25H[?25h[?25l[85;144H4[37;24H[?25h[?25l[85;144H3[37;23H[?25h[?25l[85;144H2[37;22H[?25h[?25l[85;144H1[37;21H[?25h[?25l[85;144H0[37;20H[?25h[?25l[85;143H19[37;19H[?25h[?25l[85;143H20[37;20H[?25h[?25l[38;84r[38;1H[L[1;85r[37;20H[K[38;13Htokens.append(Token(kind, lexeme))[85;140H[K[85;140H38,13[9CAll[38;13H[?25h[?25l[37;12H[46m([mkind[46m)[m[85;141H7[37;13H[?25h[?25l(kind)[85;144H4[37;14H[?25h[?25l[85;144H5[37;15H[?25h[?25l[85;144H6[37;16H[?25h[?25l[46m([mkind[46m)[m[85;144H7[37;17H[?25h[?25l[46m [m): [46m)[m[85;144H8[37;18H[?25h[?25l[46ma[m):a[46m)[m[85;144H9[37;19H[?25h[?25l[46mn[m):n[46m)[m[85;143H20[37;20H[?25h[?25l[33man[m[33m[46md[m):[33md[m[46m)[m[85;144H1[37;21H[?25h[?25l[46m [m): [46m)[m[85;144H2[37;22H[?25h[?25l[46mt[m):t[46m)[m[85;144H3[37;23H[?25h[?25l[46me[m):e[46m)[m[85;144H4[37;24H[?25h[?25l[46mm[m):m[46m)[m[85;144H5[37;25H[?25h[?25l[46mp[m):p[46m)[m[85;144H6[37;26H[?25h[?25l[46m [m): [46m)[m[85;144H7[37;27H[?25h[?25l)[46m:[m [46m)[m:[85;144H6[37;26H[?25h[?25l)[46m:[m [46m)[m:[85;144H5[37;25H[?25h[?25l)[46m:[m [46m)[m:[85;144H4[37;24H[?25h[?25l)[46m:[m [46m)[m:[85;144H3[37;23H[?25h[?25l)[46m:[m [46m)[m:[85;144H2[37;22H[?25h[?25l)[46m:[m [46m)[m:[85;144H1[37;21H[?25h[?25lan)[46m:[m [46m)[m:[85;144H0[37;20H[?25h[?25l)[46m:[m [46m)[m:[85;143H19[37;19H[?25h[?25l)[46m:[m [46m)[m:[85;144H8[37;18H[?25h[?25l)[46m:[m [46m)[m:[85;144H7[37;17H[?25h[?25l(kind)[85;141H6[36;17H[?25h[?25l[85;144H8[36;18H[?25h[?25l[85;144H9[36;19H[?25h[?25l[85;143H20[36;20H[?25h[?25l[85;144H1[36;21H[?25h[?25l[85;144H2[36;22H[?25h[?25l[85;144H3[36;23H[?25h[?25l[85;144H4[36;24H[?25h[?25l[85;144H5[36;25H[?25h[?25l[85;144H6[36;26H[?25h[?25l[85;144H7[36;27H[?25h[?25l[85;144H8[36;28H[?25h[?25lp[46m()[m[85;144H9[36;29H[?25h[?25l[85;143H30[36;30H[?25h[?25l[85;144H1[36;31H[?25h[?25l[37;84r[37;1H[L[1;85r[85;140H[K[85;140H37,9[10CAll[36;29H()[37;9H[?25h[?25li[85;143H10[37;10H[?25h[?25l[33mif[m[85;144H1[37;11H[?25h[?25l[85;144H2[37;12H[?25h[?25l([85;144H3[37;13H[?25h[?25lk[85;144H4[37;14H[?25h[?25li[85;144H5[37;15H[?25h[?25ln[85;144H6[37;16H[?25h[?25ld[85;144H7[37;17H[?25h[?25l[85;144H8[37;18H[?25h[?25l=[85;144H9[37;19H[?25h[?25l=[85;143H20[37;20H[?25h[?25l[85;144H1[37;21H[?25h[?25l[85;144H0[37;20H[?25h[?25l[37;19H[K[85;143H19[37;19H[?25h[?25l=[85;143H20[37;20H[?25h[?25l[85;144H1[37;21H[?25h[?25l[85;144H0[37;20H[?25h[?25l[37;19H[K[85;143H19[37;19H[?25h[?25l[37;18H[K[85;144H8[37;18H[?25h[?25li[85;144H9[37;19H[?25h[?25l[33mis[m[85;143H20[37;20H[?25h[?25l[85;144H1[37;21H[?25h[?25l[85;144H0[37;20H[?25h[?25li[37;19H[K[85;143H19[37;19H[?25h[?25l[33mis[m[85;143H20[37;20H[?25h[?25l[85;144H1[37;21H[?25h[?25l[31m'
        if (kind): 
            tokens.append(Token(kind, lexeme))
        text = text[len(lexeme):]
    return tokens

def main():
    if (len(sys.argv) != 2): usage();
    contents = readFile(sys.argv[1]);
    tokens = scan(contents)
    for t in tokens: print(t)

def readFile(path):
    with open(path, 'r') as file:
        content = file.read()
    return content

Token = namedtuple([m[1CToken[1C[31m, [[m[1Ckind[1C[31m, [m[1Clexeme[1C[31m])

def usage():
    print(f[m[1Cusage: {sys.argv[[1C]} DATA_FILE[1C[31m)
    sys.exit(1)

if __name__ == [10C:
    main()[m[85;144H2[37;22H[?25h[?25l[31m/[m[85;144H3[37;23H[?25h[?25l[31m'[m
        [33mif[m (kind): 
            tokens.append(Token(kind, lexeme))
        text = text[[36mlen[m(lexeme):]
    [33mreturn[m tokens

[33mdef[m [36mmain[m():
    [33mif[m ([36mlen[m(sys.argv) != [1C): usage();
    contents = readFile(sys.argv[[1C]);
    tokens = scan(contents)
    [33mfor[m t [33min[m tokens: [36mprint[m(t)

[33mdef[m [36mreadFile[m(path):
    [33mwith[m [36mopen[m(path, [3C) [33mas[m [36mfile[m:
        content = [36mfile[m.read()
    [33mreturn[m content

Token = namedtuple([1C[31mToken[m[1C, [[1C[31mkind[m[1C, [1C[31mlexeme[m[1C])

[33mdef[m [36musage[m():
    [36mprint[m(f[1C[31musage: {sys.argv[0]} DATA_FILE[m[1C)
    sys.exit([1C)

[33mif[m __name__ == [10C:
    main()[85;144H4[37;24H[?25h[?25l)[37;12H[46m([11C)[m[85;144H5[37;25H[?25h[?25l:[37;12H([11C)[85;144H6[37;26H[?25h[?25l[38;84r[38;1H[L[1;85r[85;140H[K[85;140H38,13[9CAll[38;13H[?25h[?25lc[85;144H4[38;14H[?25h[?25lo[85;144H5[38;15H[?25h[?25lm[85;144H6[38;16H[?25h[?25lm[85;144H7[38;17H[?25h[?25le[85;144H8[38;18H[?25h[?25ln[85;144H9[38;19H[?25h[?25lt[85;143H20[38;20H[?25h[?25l[85;144H1[38;21H[?25h[?25l+[85;144H2[38;22H[?25h[?25l[38;21H[K[85;144H1[38;21H[?25h[?25l=[85;144H2[38;22H[?25h[?25l[85;144H3[38;23H[?25h[?25lc[85;144H4[38;24H[?25h[?25lo[85;144H5[38;25H[?25h[?25lp[85;144H6[38;26H[?25h[?25l[38;25H[K[85;144H5[38;25H[?25h[?25lm[85;144H6[38;26H[?25h[?25lm[85;144H7[38;27H[?25h[?25le[85;144H8[38;28H[?25h[?25ln[85;144H9[38;29H[?25h[?25lt[85;143H30[38;30H[?25h[?25l[85;144H1[38;31H[?25h[?25l+[85;144H2[38;32H[?25h[?25l[31m1[m[85;144H3[38;33H[?25h[?25l[85;144H4[38;34H[?25h[?25l[85;144H3[38;33H[?25h[?25l[38;32H[K[85;144H2[38;32H[?25h[?25l[85;144H3[38;33H[?25h[?25l[31m1[m[85;144H4[38;34H[?25h[?25l[39;84r[39;1H[L[1;85r[85;140H[K[85;140H39,13[9CAll[39;13H[?25h[?25lt[85;144H4[39;14H[?25h[?25ly[85;144H5[39;15H[?25h[?25le[85;144H6[39;16H[?25h[?25l[39;15H[K[85;144H5[39;15H[?25h[?25l[39;14H[K[85;144H4[39;14H[?25h[?25le[85;144H5[39;15H[?25h[?25lm[85;144H6[39;16H[?25h[?25lp[85;144H7[39;17H[?25h[?25l[85;144H8[39;18H[?25h[?25l=[85;144H9[39;19H[?25h[?25l[85;143H20[39;20H[?25h[?25lT[85;144H1[39;21H[?25h[?25lr[85;144H2[39;22H[?25h[?25lu[85;144H3[39;23H[?25h[?25l[36mTrue[m[85;144H4[39;24H[?25h[?25l[85;140H40,20[40;20H[?25h[?25l[85;143H19[40;19H[?25h[?25l[40;12H[46m([mkind[46m)[m[85;144H8[40;18H[?25h[?25l[85;144H7[40;17H[?25h[?25l[46m [m): [46m)[m[85;144H8[40;18H[?25h[?25l[46ma[m):a[46m)[m[85;144H9[40;19H[?25h[?25l[46mn[m):n[46m)[m[85;143H20[40;20H[?25h[?25l[33man[m[33m[46md[m):[33md[m[46m)[m[85;144H1[40;21H[?25h[?25l[46m [m): [46m)[m[85;144H2[40;22H[?25h[?25l[46mt[m):t[46m)[m[85;144H3[40;23H[?25h[?25l[46me[m):e[46m)[m[85;144H4[40;24H[?25h[?25l[46mm[m):m[46m)[m[85;144H5[40;25H[?25h[?25l[46mp[m):p[46m)[m[85;144H6[40;26H[?25h[?25l[46mo[m):o[46m)[m[85;144H7[40;27H[?25h[?25l)[46m:[m [46m)[m:[85;144H6[40;26H[?25h[?25l[46m [m): [46m)[m[85;144H7[40;27H[?25h[?25l[46mi[m):i[46m)[m[85;144H8[40;28H[?25h[?25l[33mi[m[33m[46ms[m):[33ms[m[46m)[m[85;144H9[40;29H[?25h[?25l[46m [m): [46m)[m[85;143H30[40;30H[?25h[?25l[46mF[m):F[46m)[m[85;144H1[40;31H[?25h[?25l)[46m:[m [46m)[m:[85;144H0[40;30H[?25h[?25l[46mF[m):F[46m)[m[85;144H1[40;31H[?25h[?25l[46ma[m):a[46m)[m[85;144H2[40;32H[?25h[?25l[46ml[m):l[46m)[m[85;144H3[40;33H[?25h[?25l[46ms[m):s[46m)[m[85;144H4[40;34H[?25h[?25l[36mFals[m[36m[46me[m):[36me[m[46m)[m[85;144H5[40;35H[?25h[?25l[46m [m): [46m)[m[85;144H6[40;36H[?25h[?25l[46ma[m):a[46m)[m[85;144H7[40;37H[?25h[?25l[46mn[m):n[46m)[m[85;144H8[40;38H[?25h[?25l[33man[m[33m[46md[m):[33md[m[46m)[m[85;144H9[40;39H[?25h[?25l[46m [m): [46m)[m[85;143H40[40;40H[?25h[?25l[46mc[m):c[46m)[m[85;144H1[40;41H[?25h[?25l[46mp[m):p[46m)[m[85;144H2[40;42H[?25h[?25l[46mo[m):o[46m)[m[85;144H3[40;43H[?25h[?25l)[46m:[m [46m)[m:[85;144H2[40;42H[?25h[?25l)[46m:[m [46m)[m:[85;144H1[40;41H[?25h[?25l[46mo[m):o[46m)[m[85;144H2[40;42H[?25h[?25l[46mm[m):m[46m)[m[85;144H3[40;43H[?25h[?25l[46mm[m):m[46m)[m[85;144H4[40;44H[?25h[?25l[46me[m):e[46m)[m[85;144H5[40;45H[?25h[?25l[46mn[m):n[46m)[m[85;144H6[40;46H[?25h[?25l[46mt[m):t[46m)[m[85;144H7[40;47H[?25h[?25l[46m [m): [46m)[m[85;144H8[40;48H[?25h[?25l[46m![m):![46m)[m[85;144H9[40;49H[?25h[?25l[46m=[m):=[46m)[m[85;143H50[40;50H[?25h[?25l)[46m:[m [46m)[m:[85;143H49[40;49H[?25h[?25l)[46m:[m [46m)[m:[85;144H8[40;48H[?25h[?25l[46mn[m):n[46m)[m[85;144H9[40;49H[?25h[?25l[46mo[m):o[46m)[m[85;143H50[40;50H[?25h[?25l[33mno[m[33m[46mt[m):[33mt[m[46m)[m[85;144H1[40;51H[?25h[?25l[46m [m): [46m)[m[85;144H2[40;52H[?25h[?25l[31m[46m2[m):[31m2[m[46m)[m[85;144H3[40;53H[?25h[?25l[40;12H([40C)[41;26H[46m([19C)[m[85;141H1,47[41;47H[?25h[?25l[41;26H([19C)[42;20H[46m[[12C][m[85;141H2,34[42;34H[?25h[?25l[43;84r[43;1H[L[1;85r[85;140H[K[85;140H43,9[10CAll[42;20H[[12C][43;9H[?25h[?25lt[85;143H10[43;10H[?25h[?25le[85;144H1[43;11H[?25h[?25lm[85;144H2[43;12H[?25h[?25lp[85;144H3[43;13H[?25h[?25l[85;144H4[43;14H[?25h[?25l=[85;144H5[43;15H[?25h[?25l[85;144H6[43;16H[?25h[?25lT[85;144H7[43;17H[?25h[?25lr[85;144H8[43;18H[?25h[?25lu[85;144H9[43;19H[?25h[?25l[36mTrue[m[85;143H20[43;20H[?25h[?25l[42;20H[46m[[12C][m[85;141H2[42;20H[?25h[?25l[[12C][85;141H1[41;20H[?25h[?25l[85;141H0[40;20H[?25h[?25l[85;141H1[41;20H[?25h[?25l[42;20H[46m[[12C][m[85;141H2[42;20H[?25h[?25l[[12C][85;141H3[43;20H[?25h[?25lTru[43;19H[K[85;143H19[43;19H[?25h[?25l[43;18H[K[85;144H8[43;18H[?25h[?25l[43;17H[K[85;144H7[43;17H[?25h[?25l[43;16H[K[85;144H6[43;16H[?25h[?25lF[85;144H7[43;17H[?25h[?25la[85;144H8[43;18H[?25h[?25ll[85;144H9[43;19H[?25h[?25ls[85;143H20[43;20H[?25h[?25l[36mFalse[m[85;144H1[43;21H[?25h[?25l`[85;144H2[43;22H[?25h[?25l[43;21H[K[85;144H1[43;21H[?25h[85;1H[K[43;20H[?25l[85;130H^[[43;20H[85;130H  [43;21H[85;140H43,20[9CAll[43;20H[?25h[?25l[85;130H:[43;20H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"lexer.py" 64L, 1820C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ vim lexer.py [7@./lexer.py data.txt[C
  File "./lexer.py", line 40
    if (kind and temp is False and comment not 2): 
                                               ^
SyntaxError: invalid syntax
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ ./lexer.py data.txt [7Pvim lexer.py[C[7@./lexer.py data.txt[C[Kls[K./lexer.pyls[K./lexer.py data.txt [7Pvim lexer.py[C
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"lexer.py" 64L, 1820C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[34m#!/usr/bin/env python3[m

[35mimport[m re
[35mimport[m sys
[35mfrom[m collections [35mimport[m namedtuple

[34m#Using the next_match() function provides a workaround for the fact
#that Python 3.7 does not support assignment expressions.  In fact,
#the clumsy nested if-then-else handling in exactly this situation of
#regex matching is cited as part of the rationale for the recent
#addition of assignment expressions using the `:=` walrus operator to
#Python 3.8.
#<https://www.python.org/dev/peps/pep-0572/#the-importance-of-real-code>


#returns pair containing regex match-object and token kind.  If token
#should be ignored, kind should be returned as None.
#note that m.group() gives lexeme after a successful match[m
[33mdef[m [36mnext_match[m(text):
    m = re.compile([31mr'\s+'[m).match(text)
    [33mif[m (m): [33mreturn[m (m, [36mNone[m)  [34m#None kind means ignore[m[23;5Hm = re.compile([31mr'\d+'[m).match(text)
    [33mif[m (m): [33mreturn[m (m, [31m'INT'[m)[26;5Hm = re.compile([31mr'.'[m).match(text)  [34m#must be last: match any char[m
    [33mif[m (m): [33mreturn[m (m, m.group())


[33mdef[m [36mscan[m(text):
    tokens = []
    comment = [31m0[m
    temp = [36mFalse[m
    [33mwhile[m ([36mlen[m(text) > [31m0[m):[35;9H(match, kind) = next_match(text)[36;9Hlexeme = match.group()[37;9H[33mif[m (kind [33mis[m [31m'/'[m):[38;13Hcomment = comment + [31m1[m[39;13Htemp = [36mTrue[m[40;9H[33mif[m (kind [33mand[m temp [33mis[m [36mFalse[m [33mand[m comment [33mnot[m [31m2[m):[41;13Htokens.append(Token(kind, lexeme))[42;9Htext = text[[36mlen[m(lexeme):][43;9Htemp = [36mFalse[m
    [33mreturn[m tokens

[33mdef[m [36mmain[m():
    [33mif[m ([36mlen[m(sys.argv) != [31m2[m): usage();
    contents = readFile(sys.argv[[31m1[m]);
    tokens = scan(contents)
    [33mfor[m t [33min[m tokens: [36mprint[m(t)

[33mdef[m [36mreadFile[m(path):
    [33mwith[m [36mopen[m(path, [31m'r'[m) [33mas[m [36mfile[m:[54;9Hcontent = [36mfile[m.read()
    [33mreturn[m content

Token = namedtuple([31m'Token'[m, [[31m'kind'[m, [31m'lexeme'[m])

[33mdef[m [36musage[m():
    [36mprint[m(f[31m'usage: {sys.argv[0]} DATA_FILE'[m)
    sys.exit([31m1[m)

[33mif[m __name__ == [31m"__main__"[m:
    main()
[1m[34m~                                                                                                                                                            [66;1H~                                                                                                                                                            [67;1H~                                                                                                                                                            [68;1H~                                                                                                                                                            [69;1H~                                                                                                                                                            [70;1H~                                                                                                                                                            [71;1H~                                                                                                                                                            [72;1H~                                                                                                                                                            [73;1H~                                                                                                                                                            [74;1H~                                                                                                                                                            [75;1H~                                                                                                                                                            [76;1H~                                                                                                                                                            [77;1H~                                                                                                                                                            [78;1H~                                                                                                                                                            [79;1H~                                                                                                                                                            [80;1H~                                                                                                                                                            [81;1H~                                                                                                                                                            [82;1H~                                                                                                                                                            [83;1H~                                                                                                                                                            [84;1H~                                                                                                                                                            [m[85;140H43,20[9CAll[43;20H[?25h[?1000l[?1002h[?25l[85;130H~@k[43;20H[85;130H   [42;20H[46m[[12C][m[85;141H2[42;20H[?25h[?25l[85;130H~@k[42;20H[85;130H   [41;20H[42;20H[[12C][85;141H1[41;20H[?25h[?25l[85;130H~@k[41;20H[85;130H   [40;20H[85;141H0[40;20H[?25h[?25l[85;130H~@k[40;20H[85;130H   [40;21H[85;144H1[40;21H[?25h[?25l[85;130H~@k[40;21H[85;130H   [40;22H[85;144H2[40;22H[?25h[?25l[85;130H~@k[40;22H[85;130H   [40;23H[85;144H3[40;23H[?25h[?25l[85;130H~@k[40;23H[85;130H   [40;24H[85;144H4[40;24H[?25h[?25l[85;130H~@k[40;24H[85;130H   [40;25H[85;144H5[40;25H[?25h[?25l[85;130H~@k[40;25H[85;130H   [40;26H[85;144H6[40;26H[?25h[?25l[85;130H~@k[40;26H[85;130H   [40;27H[85;144H7[40;27H[?25h[?25l[85;130H~@k[40;27H[85;130H   [40;28H[85;144H8[40;28H[?25h[?25l[85;130H~@k[40;28H[85;130H   [40;29H[85;144H9[40;29H[?25h[?25l[85;130H~@k[40;29H[85;130H   [40;30H[85;143H30[40;30H[?25h[?25l[85;130H~@k[40;30H[85;130H   [40;31H[85;144H1[40;31H[?25h[?25l[85;130H~@k[40;31H[85;130H   [40;32H[85;144H2[40;32H[?25h[?25l[85;130H~@k[40;32H[85;130H   [40;33H[85;144H3[40;33H[?25h[?25l[85;130H~@k[40;33H[85;130H   [40;34H[85;144H4[40;34H[?25h[?25l[85;130H~@k[40;34H[85;130H   [40;35H[85;144H5[40;35H[?25h[?25l[85;130H~@k[40;35H[85;130H   [40;36H[85;144H6[40;36H[?25h[?25l[85;130H~@k[40;36H[85;130H   [40;37H[85;144H7[40;37H[?25h[?25l[85;130H~@k[40;37H[85;130H   [40;38H[85;144H8[40;38H[?25h[?25l[85;130H~@k[40;38H[85;130H   [40;39H[85;144H9[40;39H[?25h[?25l[85;130H~@k[40;39H[85;130H   [40;40H[85;143H40[40;40H[?25h[?25l[85;130H~@k[40;40H[85;130H   [40;41H[85;144H1[40;41H[?25h[?25l[85;130H~@k[40;41H[85;130H   [40;42H[85;144H2[40;42H[?25h[?25l[85;130H~@k[40;42H[85;130H   [40;43H[85;144H3[40;43H[?25h[?25l[85;130H~@k[40;43H[85;130H   [40;44H[85;144H4[40;44H[?25h[?25l[85;130H~@k[40;44H[85;130H   [40;45H[85;144H5[40;45H[?25h[?25l[85;130H~@k[40;45H[85;130H   [40;46H[85;144H6[40;46H[?25h[?25l[85;130H~@k[40;46H[85;130H   [40;47H[85;144H7[40;47H[?25h[?25l[85;130H~@k[40;47H[85;130H   [40;48H[85;144H8[40;48H[?25h[?25l[85;130H~@k[40;48H[85;130H   [40;49H[85;144H9[40;49H[?25h[?25l[85;130H~@k[40;49H[85;130H   [40;50H[85;143H50[40;50H[?25h[?25l[85;130H~@k[40;50H[85;130H   [40;51H[85;144H1[40;51H[?25h[?25l[85;130Ha[40;51H[85;130H [40;52H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H40,52[9CAll[40;52H[?25h[?25l[85;144H1[40;51H[?25h[?25lno [31m2[m): [85;144H0[40;50H[?25h[?25l [31m2[m): [85;143H49[40;49H[?25h[?25l [31m2[m): [85;144H8[40;48H[?25h[?25l~ [31m2[m):[85;144H9[40;49H[?25h[?25l! [31m2[m):[85;143H50[40;50H[?25h[?25l [31m2[m): [85;143H49[40;49H[?25h[?25l [31m2[m): [85;144H8[40;48H[?25h[?25l! [31m2[m):[85;144H9[40;49H[?25h[?25l= [31m2[m):[85;143H50[40;50H[?25h[85;1H[K[40;49H[?25l[85;130H^[[40;49H[85;130H  [40;50H[85;140H40,49[9CAll[40;49H[?25h[?25l[85;130H:[40;49H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"lexer.py" 64L, 1819C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ vim lexer.py [7@./lexer.py data.txt[C[7Pvim lexer.py[C[7@./lexer.py data.txt[C
Token(kind='INT', lexeme='21')
Token(kind='INT', lexeme='23')
Token(kind='A', lexeme='A')
Token(kind='INT', lexeme='34')
Token(kind='_', lexeme='_')
Token(kind='INT', lexeme='22')
Token(kind='I', lexeme='I')
Token(kind='D', lexeme='D')
Token(kind='_', lexeme='_')
Token(kind='INT', lexeme='44')
kmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ clear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises/lexer$ cd ..
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ ls
01-regex  02-lexer  03-calc  04-ast  ast  calc	lexer  regex
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ cd ..
kmoshie1@remote07:~/i471a/submit/lab1$ ls
exercises  lab1.LOG
kmoshie1@remote07:~/i471a/submit/lab1$ exit

Script done on 2021-02-25 19:30:29-05:00 [COMMAND_EXIT_CODE="0"]
Script started on 2021-02-25 19:32:59-05:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="157" LINES="85"]
kmoshie1@remote07:~/i471a/submit/lab1$ cd exercises/calc/
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ls
calc.mjs  calc.py  data.txt  expn-data.txt
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ vim calc.mjs 
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"calc.mjs" 135L, 2350C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m values = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hvalues.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m values;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7Ht += (kind === [31m'+'[m) ? t1 : -t1;
    [36m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[70;7Hmatch([31m'-'[m);[71;7H[33mreturn[m - term();
    [36m}[m
    [33melse[m [36m{[m[74;7H[33mreturn[m factor();
    [36m}
[m  [36m}

[m  [36mfunction[m factor() [36m{[m
    [33mif[m (check([31m'INT'[m)) [36m{[m[80;7H[33mconst[m value = parseInt(lookahead.lexeme);[81;7Hmatch([31m'INT'[m);[82;7H[33mreturn[m value;
    [36m}[m
    [33melse[m [36m{[m[85;140H70,5[10CTop[70;5H[?25h[?1000l[?1002h[?25l[85;130H~@k[70;5H[85;130H   [71;5H[85;141H1[71;5H[?25h[?25l[85;130H~@k[71;5H[85;130H   [72;5H[69;21H[36m[46m{[72;5H}[m[85;141H2[72;5H[?25h[?25l[85;130H~@k[72;5H[85;130H   [73;5H[69;21H[36m{[72;5H}[m[85;141H3[73;5H[?25h[?25l[85;130H~@k[73;5H[85;130H   [74;5H[85;141H4[74;5H[?25h[?25l[85;130H~@k[74;5H[85;130H   [75;5H[73;10H[36m[46m{[75;5H}[m[85;141H5[75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [76;3H[68;19H[36m[46m{[m[73;10H[36m{[75;5H}[m
  [36m[46m}[m[85;141H6,3[76;3H[?25h[?25l[85;130H~@k[76;3H[85;130H   [77;1H[68;19H[36m{[76;3H}[m[85;141H7,0-1[77;1H[?25h[?25l[85;130H~@k[77;1H[85;130H   [78;5H[85;141H8,5  [78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [79;5H[85;141H9[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Hmatch([31m'('[m);[85;1H[K[85;140H80,5[11C1%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7H[33mconst[m value = expr();[85;140H[K[85;140H81,5[11C3%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Hmatch([31m')'[m);[85;140H[K[85;140H82,5[11C5%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[75;23H[36m[46m{[79;5H}[m[84;7H[33mreturn[m value;[85;140H[K[85;140H83,5[11C7%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[74;23H[36m{[78;5H}[84;5H}[m[85;140H[K[85;140H84,5[11C9%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3H[36m}[m[85;140H[K[85;140H85,5[10C11%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H86,5[10C13%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[85;140H[K[85;140H87,5[10C15%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[85;140H[K[85;140H88,5[10C17%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[74;10H[36m[46m{[79;5H}[m[84;1H[36mfunction[m scan(text) [36m{[m[85;140H[K[85;140H89,5[10C19%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;3H[1;84r[84;1H
[1;85r[67;21H[36m[46m{[m[73;10H[36m{[78;5H}[m
  [36m[46m}[m[84;3H[33mconst[m tokens = [36m[][m;[85;140H[K[85;140H90,3[10C21%[79;3H[?25h[?25l[85;130H~@k[79;3H[85;130H   [79;1H[1;84r[84;1H
[1;85r[13;22H[36m[46m{[m[66;21H[36m{[78;3H}[m
[36m[46m}[m[84;3H[33mwhile[m (text.length > 0) [36m{[m[85;140H[K[85;140H91,1[10C23%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[12;22H[36m{[78;1H}[84;5Hlet[m m;[85;140H[K[85;140H92,0-1[8C25%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[84;5H[33mif[m ((m = text.match(/^[36m\[ms+/))) [36m{[m[85;140H[K[85;140H93,0-1[8C27%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H94,5[10C29%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[33melse[m [33mif[m ((m = text.match(/^[36m\[md+/))) [36m{[m[85;140H[K[85;140H95,5[10C31%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Htokens.push([33mnew[m Token([31m'INT'[m, m[36m[[m0[36m][m));[85;140H[K[85;140H96,5[10C33%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H97,5[10C35%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[33melse[m [36m{[m[85;140H[K[85;140H98,5[10C37%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [78;5H[85;141H7[78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [77;5H[85;141H6[77;5H[?25h[?25l[85;130H~@k[77;5H[85;130H   [76;5H[85;141H5[76;5H[?25h[?25l[85;130H~@k[76;5H[85;130H   [75;5H[85;141H4[75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [74;1H[85;141H3,0-1[74;1H[?25h[?25l[85;130H~@k[74;1H[85;130H   [73;1H[85;141H2[73;1H[?25h[?25l[85;130H~@k[73;1H[85;130H   [74;1H[85;141H3[74;1H[?25h[?25l[85;130H~@k[74;1H[85;130H   [75;5H[85;141H4,5  [75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [76;5H[85;141H5[76;5H[?25h[?25l[85;130H~@k[76;5H[85;130H   [77;5H[85;141H6[77;5H[?25h[?25l[85;130H~@k[77;5H[85;130H   [78;5H[85;141H7[78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [79;5H[85;141H8[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[78;35H[36m[46m{
[m    [36m[46m}[m[84;7Hm = text.match(/^./);[85;140H[K[85;140H99,5[10C39%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[77;35H[36m{
[m    [36m}[m[84;7Htokens.push([33mnew[m Token(m[36m[[m0[36m][m, m[36m[[m0[36m][m));[85;140H[K[85;140H100,5[9C41%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H101,5[9C43%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[77;40H[36m[46m{[79;5H}[m[84;5Htext = text.substring(m[36m[[m0[36m][m.length);[85;140H[K[85;140H102,5[9C45%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[76;40H[36m{[78;5H}[84;3H}[m[85;140H[K[85;140H103,5[9C47%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3H[33mreturn[m tokens;[85;140H[K[85;140H104,5[9C49%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H105,5[9C50%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[76;10H[36m[46m{[79;5H}[m[85;140H[K[85;140H106,5[9C52%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[75;10H[36m{[78;5H}[m[85;140H[K[85;140H107,5[9C54%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;3H[1;84r[84;1H
[1;85r[67;27H[36m[46m{[79;3H}[m[84;1H[33mconst[m CHAR_SET = [31m'utf8'[m;[85;140H[K[85;140H108,3[9C56%[79;3H[?25h[?25l[85;130H~@k[79;3H[85;130H   [79;5H[1;84r[84;1H
[1;85r[66;27H[36m{[78;3H}[84;1Hfunction[m main() [36m{[m[85;140H[K[85;140H109,5[9C58%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;1H[1;84r[84;1H
[1;85r[63;21H[36m[46m{[79;1H}[m[84;3H[33mif[m (process.argv.length !== 3) usage();[85;140H[K[85;140H110,1[9C60%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[62;21H[36m{[78;1H}[m[84;3H[33mconst[m file = process.argv[36m[[m2[36m][m;[85;140H[K[85;140H111,0-1[7C62%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[84;3H[33mconst[m text = fs.readFileSync(file === [31m'-'[m ? 0 : file, CHAR_SET);[85;140H[K[85;140H112,0-1[7C64%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3H[33mconst[m value = parse(text);[85;140H[K[85;140H113,5[9C66%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3Hconsole.log(value);[85;140H[K[85;140H114,5[9C68%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H115,5[9C70%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[85;140H[K[85;140H116,5[9C72%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;1H[36mfunction[m usage() [36m{[m[85;140H[K[85;140H117,5[9C74%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3H[33mconst[m prog = Path.basename(process.argv[36m[[m1[36m][m)[85;140H[K[85;140H118,5[9C76%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [78;5H[85;142H7[78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [77;5H[85;142H6[77;5H[?25h[?25l[85;130H~@k[77;5H[85;130H   [76;5H[85;142H5[76;5H[?25h[?25l[85;130H~@k[76;5H[85;130H   [75;5H[85;142H4[75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [74;5H[85;142H3[74;5H[?25h[?25l[85;130H~@k[74;5H[85;130H   [73;1H[85;142H2,0-1[73;1H[?25h[?25l[85;130H~@k[73;1H[85;130H   [72;1H[85;142H1[72;1H[?25h[?25l[85;130H~@k[72;1H[85;130H   [71;1H[55;21H[36m[46m{[71;1H}[m[85;142H0,1  [71;1H[?25h[?25l[85;130H~@k[71;1H[85;130H   [70;5H[55;21H[36m{[71;1H}[m[85;141H09,5[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [69;3H[57;27H[36m[46m{[69;3H}[m[85;142H8,3[69;3H[?25h[?25l[85;130H~@k[69;3H[85;130H   [68;5H[57;27H[36m{[69;3H}[m[85;142H7,5[68;5H[?25h[?25l[85;130H~@k[68;5H[85;130H   [67;5H[64;10H[36m[46m{[67;5H}[m[85;142H6[67;5H[?25h[?25l[85;130H~@k[67;5H[85;130H   [66;5H[64;10H[36m{[67;5H}[m[85;142H5[66;5H[?25h[?25l[85;130H~@k[66;5H[85;130H   [65;5H[85;142H4[65;5H[?25h[?25l[85;130H~@k[65;5H[85;130H   [64;5H[85;142H3[64;5H[?25h[?25l[85;130H~@k[64;5H[85;130H   [63;5H[61;40H[36m[46m{[63;5H}[m[85;142H2[63;5H[?25h[?25l[85;130H~@k[63;5H[85;130H   [62;5H[61;40H[36m{[63;5H}[m[85;142H1[62;5H[?25h[?25l[85;130H~@k[62;5H[85;130H   [63;5H[61;40H[36m[46m{[63;5H}[m[85;142H2[63;5H[?25h[?25l[85;130H~@k[63;5H[85;130H   [63;5H[?25h[?25l[85;130Ha[63;5H[85;130H [63;6H[85;1H[1m-- INSERT --[m[85;140H[K[85;140H102,6[9C76%[63;6H[?25h[?25l[64;84r[64;1H[L[1;85r[85;140H[K[85;140H103,4-11      75%[61;40H[36m{[63;5H}[64;11H[?25h[?25l[m[85;144H3-10[64;10H[?25h[?25l[85;144H2-9 [64;9H[?25h[?25l[85;144H1  [64;1H[?25h[?25l[63;84r[84;1H
[1;85r[63;5H[36m}[m[84;3H[33mconst[m prog = Path.basename(process.argv[36m[[m1[36m][m)[85;140H[K[85;140H102,6[9C76%[61;40H[36m[46m{[63;5H}[?25h[?25l[64;84r[m[64;1H[L[1;85r[85;140H[K[85;140H103,4-11      75%[61;40H[36m{[63;5H}[64;11H[?25h[?25l[m[85;144H3-10[64;10H[?25h[?25l[85;144H2-9 [64;9H[?25h[?25l[85;144H1  [64;1H[?25h[?25l[85;144H2[64;2H[?25h[?25l[85;144H3[64;3H[?25h[?25l[85;144H4[64;4H[?25h[?25l[85;144H5[64;5H[?25h[?25le[85;144H6[64;6H[?25h[?25ll[85;144H7[64;7H[?25h[?25ls[85;144H8[64;8H[?25h[?25l[33melse[m[85;144H9[64;9H[?25h[?25l[85;144H10[64;10H[?25h[?25li[85;145H1[64;11H[?25h[?25l[33mif[m[85;145H2[64;12H[?25h[?25l[85;145H3[64;13H[?25h[?25l([85;145H4[64;14H[?25h[?25l([85;145H5[64;15H[?25h[?25lm[85;145H6[64;16H[?25h[?25l[85;145H7[64;17H[?25h[?25l=[85;145H8[64;18H[?25h[?25l[85;145H9[64;19H[?25h[?25lt[85;144H20[64;20H[?25h[?25le[85;145H1[64;21H[?25h[?25lx[85;145H2[64;22H[?25h[?25lt[85;145H3[64;23H[?25h[?25l/[85;145H4[64;24H[?25h[?25l[64;23H[K[85;145H3[64;23H[?25h[?25l.[85;145H4[64;24H[?25h[?25lm[85;145H5[64;25H[?25h[?25la[85;145H6[64;26H[?25h[?25lt[85;145H7[64;27H[?25h[?25lc[85;145H8[64;28H[?25h[?25lh[85;145H9[64;29H[?25h[?25l_[85;144H30[64;30H[?25h[?25l[64;29H[K[85;144H29[64;29H[?25h[?25l([85;144H30[64;30H[?25h[?25l/[85;145H1[64;31H[?25h[?25l^[85;145H2[64;32H[?25h[?25l[36m\[m[85;145H3[64;33H[?25h[?25l*[85;145H4[64;34H[?25h[?25l[36m\[m[85;145H5[64;35H[?25h[?25l*[85;145H6[64;36H[?25h[?25l/[85;145H7[64;37H[?25h[?25l)[64;29H[46m([7C)[m[85;145H8[64;38H[?25h[?25l)[64;14H[46m([m[14C([7C)[46m)[m[85;145H9[64;39H[?25h[?25l)[64;13H[46m([m([23C)[46m)[m[85;144H40[64;40H[?25h[?25l[36m{[m[64;13H([25C)[36m[46m{[70;3H}[m[85;145H1[64;41H[?25h[?25l[65;84r[65;1H[L[1;85r[70;3H[46m [m
  [36m}[m[85;140H[K[85;140H104,6-13      73%[64;40H[36m{[m[70;3H [65;13H[?25h[?25l[66;84r[66;1H[L[1;85r[85;140H[K[85;140H105,6-13      72%[66;13H[?25h[?25l    [36m}[m[64;40H[36m[46m{[66;5H}[m[85;145H   [66;6H[?25h[?25l[64;40H[36m{[66;5H}[m[85;142H4,1[65;1H[?25h[?25l[85;144H2-9[65;9H[?25h[?25lt[85;144H3-10[65;10H[?25h[?25lo[85;144H4-11[65;11H[?25h[?25le[85;144H5-12[65;12H[?25h[?25ln[85;144H6-13[65;13H[?25h[?25l[65;12H[K[85;144H5-12[65;12H[?25h[?25l[65;11H[K[85;144H4-11[65;11H[?25h[?25lk[85;144H5-12[65;12H[?25h[?25le[85;144H6-13[65;13H[?25h[?25ln[85;144H7-14[65;14H[?25h[?25ls[85;144H8-15[65;15H[?25h[?25l.[85;144H9-16[65;16H[?25h[?25lp[85;144H10-17[65;17H[?25h[?25lu[85;145H1-18[65;18H[?25h[?25ls[85;145H2-19[65;19H[?25h[?25lh[85;145H3-20[65;20H[?25h[?25l([85;145H4-21[65;21H[?25h[?25ln[85;145H5-22[65;22H[?25h[?25le[85;145H6-23[65;23H[?25h[?25l[33mnew[m[85;145H7-24[65;24H[?25h[?25l[85;145H8-25[65;25H[?25h[?25lT[85;145H9-26[65;26H[?25h[?25lo[85;144H20-27[65;27H[?25h[?25le[85;145H1-28[65;28H[?25h[?25lk[85;145H2-29[65;29H[?25h[?25l[65;28H[K[85;145H1-28[65;28H[?25h[?25l[65;27H[K[85;145H0-27[65;27H[?25h[?25lk[85;145H1-28[65;28H[?25h[?25le[85;145H2-29[65;29H[?25h[?25ln[85;145H3-30[65;30H[?25h[?25l([85;145H4-31[65;31H[?25h[?25lm[85;145H5-32[65;32H[?25h[?25l[36m[[m[85;145H6-33[65;33H[?25h[?25l0[85;145H7-34[65;34H[?25h[?25l[36m][m[36m[46m[[m0[36m[46m][m[85;145H8-35[65;35H[?25h[?25l,[36m[[m0[36m][m[85;145H9-36[65;36H[?25h[?25l[85;144H30-37[65;37H[?25h[?25lm[85;145H1-38[65;38H[?25h[?25l[36m[[m[85;145H2-39[65;39H[?25h[?25l0[85;145H3-40[65;40H[?25h[?25l[36m][m[36m[46m[[m0[36m[46m][m[85;145H4-41[65;41H[?25h[?25l)[65;30H[46m([m[7C[36m[[m0[36m][m[46m)[m[85;145H5-42[65;42H[?25h[?25l)[65;20H[46m([m[9C([10C)[46m)[m[85;145H6-43[65;43H[?25h[?25l;[65;20H([21C)[85;145H7-44[65;44H[?25h[?25l[64;40H[36m[46m{[66;5H}[m[85;142H3,41   [64;41H[?25h[?25l[61;40H[36m[46m{[63;5H}[m[64;40H[36m{[66;5H}[m[85;142H2,6 [63;6H[?25h[?25l[61;40H[36m{[63;5H}[m[85;142H1,43[62;43H[?25h[?25l[61;40H[36m[46m{[63;5H}[m[85;142H0,41[61;41H[?25h[?25l[59;35H[36m[46m{
[m    [36m[46m}[m[61;40H[36m{[63;5H}[m[85;140H99,6  [60;6H[?25h[?25l[85;141H8,36[59;36H[?25h[?25l[36m{
[m    [36m}[m[85;141H7,11[58;11H[?25h[?25l[57;27H[36m[46m{[72;3H}[m[85;141H6,28[57;28H[?25h[?25l[36m{[72;3H}[m[85;141H5,21[56;21H[?25h[?25l[55;21H[36m[46m{[74;1H}[m[85;141H4,22[55;22H[?25h[?25l[36m{[74;1H}[m[85;141H3,1 [54;1H[?25h[?25l[85;141H2[53;1H[?25h[?25l[85;141H1,2[52;2H[?25h[?25l[39;21H[36m[46m{[51;3H}[m[85;141H0,4[51;4H[?25h[?25l[39;21H[36m{[m[45;10H[36m[46m{[50;5H}[m
  [36m}[m[85;140H89,6[50;6H[?25h[?25l[45;10H[36m{[50;5H}[m[85;141H8,20[49;20H[?25h[?25l[85;141H7,18[48;18H[?25h[?25l[85;141H6,2[47;28H[?25h[?25l[85;141H5,1[46;18H[?25h[?25l[45;10H[36m[46m{[50;5H}[m[85;141H4,11[45;11H[?25h[?25l[40;23H[36m[46m{[44;5H}[m[45;10H[36m{[50;5H}[m[85;141H3,6 [44;6H[?25h[?25l[40;23H[36m{[44;5H}[m[85;141H2,20[43;20H[?25h[?25l[85;141H1[42;20H[?25h[?25l[85;141H0,44[41;44H[?25h[?25l[40;23H[36m[46m{[44;5H}[m[85;140H79,2[40;24H[?25h[?25l[39;21H[36m[46m{[m[40;23H[36m{[44;5H}[m[51;3H[36m[46m}[m[85;141H8,22[39;22H[?25h[?25l[36m{[51;3H}[m[85;141H7,1 [38;1H[?25h[?25l[29;19H[36m[46m{[37;3H}[m[85;141H6,4[37;4H[?25h[?25l[29;19H[36m{[m[34;10H[36m[46m{[36;5H}[m
  [36m}[m[85;141H5,6[36;6H[?25h[?25l[34;10H[36m{[36;5H}[m[85;141H4,23[35;23H[?25h[?25l[34;10H[36m[46m{[36;5H}[m[85;141H3,11[34;11H[?25h[?25l[30;21H[36m[46m{[33;5H}[m[34;10H[36m{[36;5H}[m[85;141H2,6 [33;6H[?25h[?25l[30;21H[36m{[33;5H}[m[85;141H1,23[32;23H[?25h[?25l[85;141H0,18[31;18H[?25h[?25l[30;21H[36m[46m{[33;5H}[m[85;140H69,22[30;22H[?25h[?25l[29;19H[36m[46m{[m[30;21H[36m{[33;5H}[m[37;3H[36m[46m}[m[85;141H8,20[29;20H[?25h[?25l[36m{[37;3H}[m[85;141H7,1 [28;1H[?25h[?25l[18;19H[36m[46m{[27;3H}[m[85;141H6,4[27;4H[?25h[?25l[18;19H[36m{[27;3H}[m[85;141H5,14[26;14H[?25h[?25l[20;38H[36m[46m{[25;5H}[m[85;141H4,6 [25;6H[?25h[?25l[20;38H[36m{[25;5H}[m[85;141H3,38[24;38H[?25h[?25l[85;141H2,25[23;25H[?25h[?25l[85;141H1,22[22;22H[?25h[?25l[85;141H2,25[23;25H[?25h[?25l[85;141H1,22[22;22H[?25h[?25l[85;141H0,35[21;35H[?25h[?25l[20;38H[36m[46m{[25;5H}[m[85;140H59,39[20;39H[?25h[?25l[85;144H8[20;38H[?25h[?25l[20;11H[46m([24C)[m [36m{[25;5H}[m[85;144H7[20;37H[?25h[?25l[85;144H6[20;36H[?25h[?25l[46ma[m) [36m{[ma[46m)[m[85;144H7[20;37H[?25h[?25l[20;11H([19C[46m([3C)[ma)[85;144H6[20;36H[?25h[?25l[20;11H[46m([m[19C([3C)a[46m)[m[85;144H7[20;37H[?25h[?25l)[46m [m[36m{[m[20;39H[K[20;36H[46m)[m [85;144H6[20;36H[?25h[?25l[46m [m) [36m{[m [46m)[m[85;144H7[20;37H[?25h[?25l[36m[46m}[m) [36m{}[m[46m)[m[85;144H8[20;38H[?25h[?25l)[46m [m[36m{[m[20;40H[K[20;37H[46m)[m [85;144H7[20;37H[?25h[?25l[46m|[m) [36m{[m|[46m)[m[85;144H8[20;38H[?25h[?25l[46m|[m) [36m{[m|[46m)[m[85;144H9[20;39H[?25h[?25l[46m [m) [36m{[m [46m)[m[85;143H40[20;40H[?25h[?25l[46mc[m) [36m{[mc[46m)[m[85;144H1[20;41H[?25h[?25l[46mh[m) [36m{[mh[46m)[m[85;144H2[20;42H[?25h[?25l[46me[m) [36m{[me[46m)[m[85;144H3[20;43H[?25h[?25l[46mc[m) [36m{[mc[46m)[m[85;144H4[20;44H[?25h[?25l[46ml[m) [36m{[ml[46m)[m[85;144H5[20;45H[?25h[?25l)[46m [m[36m{[m[20;47H[K[20;44H[46m)[m [85;144H4[20;44H[?25h[?25l[46mk[m) [36m{[mk[46m)[m[85;144H5[20;45H[?25h[?25l[46m([m) [36m{[m[20;11H([34C[46m)[m[85;144H6[20;46H[?25h[?25l[31m[46m'[m[31m) {'[m[31m[46m)[m[85;144H7[20;47H[?25h[?25l[31m[46m*[m[31m) {*[m[31m[46m)[m[85;144H8[20;48H[?25h[?25l[31m[46m*[m[31m) {*[m[31m[46m)[m[85;144H9[20;49H[?25h[?25l[31m[46m'[m) [36m{[m[31m'[m[46m)[m[85;143H50[20;50H[?25h[?25l[1C) [36m{[m[20;11H[46m([m[33C([4C)[46m)[m[85;144H1[20;51H[?25h[?25l[20;11H([39C)[85;140H60,35[21;35H[?25h[?25l[85;141H1,22[22;22H[?25h[?25l[85;141H2,25[23;25H[?25h[?25l[24;84r[24;1H[L[1;85r[85;140H[K[85;140H63,6-13[7C70%[24;13H[?25h[?25l[85;143H5-12[24;12H[?25h[?25l[85;143H4-11[24;11H[?25h[?25l[85;143H3-10[24;10H[?25h[?25l[85;143H2-9 [24;9H[?25h[?25l[85;143H1  [24;1H[?25h[?25l[85;143H2[24;2H[?25h[?25l[85;143H3[24;3H[?25h[?25l[85;143H4[24;4H[?25h[?25l[85;143H5[24;5H[?25h[?25l[85;143H6[24;6H[?25h[?25l[85;143H7[24;7H[?25h[?25li[85;143H8[24;8H[?25h[?25l[33mif[m[85;143H9[24;9H[?25h[?25l([85;143H10[24;10H[?25h[?25lk[85;144H1[24;11H[?25h[?25li[85;144H2[24;12H[?25h[?25ln[85;144H3[24;13H[?25h[?25ld[85;144H4[24;14H[?25h[?25l[85;144H5[24;15H[?25h[?25l=[85;144H6[24;16H[?25h[?25l=[85;144H7[24;17H[?25h[?25l=[85;144H8[24;18H[?25h[?25l[85;144H9[24;19H[?25h[?25l[31m'[m[85;143H20[24;20H[?25h[?25l[31m*[m[85;144H1[24;21H[?25h[?25l[31m*[m[85;144H2[24;22H[?25h[?25l[31m'[m[85;144H3[24;23H[?25h[?25l)[24;9H[46m([13C)[m[85;144H4[24;24H[?25h[?25l[36m{[m[24;9H([13C)[36m[46m{[26;5H}[m[85;144H5[24;25H[?25h[?25l[25;84r[25;1H[L[1;85r[26;5H[46m [m
    [36m}[m[85;140H[K[85;140H64,8-15[7C69%[24;24H[36m{[m[26;5H [25;15H[?25h[?25l[26;84r[26;1H[L[1;85r[85;140H[K[85;140H65,8-15[7C68%[26;15H[?25h[?25l[26;7H[36m}[m[24;24H[36m[46m{[26;7H}[m[85;144H   [26;8H[?25h[?25le[24;24H[36m{[26;7H}[m[85;143H9[26;9H[?25h[?25ll[85;143H10[26;10H[?25h[?25ls[85;144H1[26;11H[?25h[?25l[33melse[m[85;144H2[26;12H[?25h[?25l[36m{[m[36m[46m{[28;5H}[m[85;144H3[26;13H[?25h[?25l[36m{[m[27;12H[46m([12C)[m
    [36m}[m[85;141H6[27;13H[?25h[?25l[26;12H[36m[46m{[m[27;12H([12C)
    [36m[46m}[m[85;141H7,6 [28;6H[?25h[?25l[26;12H[36m{[m[27;12H[46m([12C)[m
    [36m}[m[85;141H6,13[27;13H[?25h[?25l([12C)[85;143H38[27;38H[?25h[?25l[28;84r[28;1H[L[1;85r[85;140H[K[85;140H67,8-15[7C67%[28;15H[?25h[?25l[28;7H[36m}[m[26;12H[36m[46m{[28;7H}[m[85;144H   [28;8H[?25h[?25l[26;12H[36m{[28;7H}[m[85;141H6[27;8H[?25h[?25l[85;143H7[27;7H[?25h[?25l t += (kind === [31m'+'[m) ? t1 : -t1;[85;143H8[27;8H[?25h[?25l t += (kind === [31m'+'[m) ? t1 : -t1;[85;143H9[27;9H[?25h[?25l[85;141H5[26;9H[?25h[?25l[85;141H4,1[25;1H[?25h[?25l[85;143H2-9[25;9H[?25h[?25lt[85;143H3-10[25;10H[?25h[?25l[85;143H4-11[25;11H[?25h[?25l=[85;143H5-12[25;12H[?25h[?25l[85;143H6-13[25;13H[?25h[?25lt[85;143H7-14[25;14H[?25h[?25l[25;13H[K[85;143H6-13[25;13H[?25h[?25lt[85;143H7-14[25;14H[?25h[?25l[85;143H8-15[25;15H[?25h[?25l*[85;143H9-16[25;16H[?25h[?25l*[85;143H10-17[25;17H[?25h[?25l[85;144H1-18[25;18H[?25h[?25lt[85;144H2-19[25;19H[?25h[?25l1[85;144H3-20[25;20H[?25h[?25l;[85;144H4-21[25;21H[?25h[85;1H[K[25;20H[?25l[85;130H^[[25;20H[85;130H  [25;21H[85;140H64,13-20      67%[25;20H[?25h[?25l[85;130H:[25;20H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"calc.mjs" 142L, 2511C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ vim calc.mjs ls[Kvim calc.mjs ls[Kcd exercises/calc/ls[Kcd ..[3Plscd ..lear./lexer.py data.txt [7Pvim lexer.py[C[7@./lexer.py data.txt[Cclear[Kd ..[3Plscd ..[3Plscd exercises/calc/ls[Kvim calc.mjs [K./calc.mjs  [Kexpn-data.txt 
[ [33m64[39m, [33m27[39m, [33m-1[39m ]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ./calc.mjs expn-data.txt [12Pvim calc.mjs[C
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"calc.mjs" 142L, 2511C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m values = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hvalues.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m values;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m{[m[64;9Ht = t ** t1;[65;7H[36m}[m[33melse[m[36m{[m[66;9Ht += (kind === [31m'+'[m) ? t1 : -t1;[67;7H[36m}
[m    [36m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[74;7Hmatch([31m'-'[m);[75;7H[33mreturn[m - term();
    [36m}[m
    [33melse[m [36m{[m[78;7H[33mreturn[m factor();
    [36m}
[m  [36m}

[m  [36mfunction[m factor() [36m{[m
    [33mif[m (check([31m'INT'[m)) [36m{[m[84;7H[33mconst[m value = parseInt(lookahead.lexeme);[85;140H64,13-20      Top[64;20H[?25h[?1000l[?1002h[?25l[85;130H~@k[64;20H[85;130H   [65;12H[36m[46m{[67;7H}[m[85;141H5,12   [65;12H[?25h[?25l[85;130H~@k[65;12H[85;130H   [66;20H[65;12H[36m{[67;7H}[m[85;141H6,20[66;20H[?25h[?25l[85;130H~@k[66;20H[85;130H   [67;7H[65;12H[36m[46m{[67;7H}[m[85;141H7,7 [67;7H[?25h[?25l[85;130H~@k[67;7H[85;130H   [68;5H[59;53H[36m[46m{[m[65;12H[36m{[67;7H}[m
    [36m[46m}[m[85;141H8,5[68;5H[?25h[?25l[85;130H~@k[68;5H[85;130H   [69;13H[59;53H[36m{[68;5H}[m[85;141H9,13[69;13H[?25h[?25l[85;130H~@k[69;13H[85;130H   [70;3H[57;19H[36m[46m{[70;3H}[m[85;140H70,3 [70;3H[?25h[?25l[85;130H~@k[70;3H[85;130H   [71;1H[57;19H[36m{[70;3H}[m[85;141H1,0-1[71;1H[?25h[?25l[85;130H~@k[71;1H[85;130H   [72;19H[36m[46m{[80;3H}[m[85;141H2,19 [72;19H[?25h[?25l[85;130H~@k[72;19H[85;130H   [73;20H[72;19H[36m{[80;3H}[m[85;141H3,20[73;20H[?25h[?25l[85;130H~@k[73;20H[85;130H   [74;17H[85;141H4,17[74;17H[?25h[?25l[85;130H~@k[74;17H[85;130H   [75;20H[46m()[m[85;141H5,20[75;20H[?25h[?25l[85;130H~@k[75;20H[85;130H   [76;5H[73;21H[36m[46m{[m[75;20H()
    [36m[46m}[m[85;141H6,5 [76;5H[?25h[?25l[85;130H~@k[76;5H[85;130H   [77;10H[73;21H[36m{[76;5H}[m[77;10H[36m[46m{[79;5H}[m[85;141H7,10[77;10H[?25h[?25l[85;130H~@k[77;10H[85;130H   [78;20H[77;10H[36m{[m[78;20H[46m()[m
    [36m}[m[85;141H8,2[78;20H[?25h[?25l[85;130H~@k[78;20H[85;130H   [79;5H[77;10H[36m[46m{[m[78;20H()
    [36m[46m}[m[85;141H9,5 [79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;3H[1;84r[84;1H
[1;85r[71;19H[36m[46m{[m[76;10H[36m{[78;5H}[m
  [36m[46m}[m[84;7Hmatch([31m'INT'[m);[85;1H[K[85;140H80,3[11C1%[79;3H[?25h[?25l[85;130H~@k[79;3H[85;130H   [79;1H[1;84r[84;1H
[1;85r[70;19H[36m{[78;3H}[m[84;7H[33mreturn[m value;[85;140H[K[85;140H81,0-1[9C3%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;20H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H82,20[10C5%[79;20H[?25h[?25l[85;130H~@k[79;20H[85;130H   [79;20H[1;84r[84;1H
[1;85r[79;14H[46m([5C)[m[84;5H[33melse[m [36m{[m[85;140H[K[85;140H83,20[10C6%[79;20H[?25h[?25l[85;130H~@k[79;20H[85;130H   [79;20H[1;84r[84;1H
[1;85r[78;14H([5C)[84;7Hmatch([31m'('[m);[85;140H[K[85;140H84,20[10C8%[79;20H[?25h[?25l[85;130H~@k[79;20H[85;130H   [79;19H[1;84r[84;1H
[1;85r[84;7H[33mconst[m value = expr();[85;140H[K[85;140H85,19[9C10%[79;19H[?25h[?25l[85;130H~@k[79;19H[85;130H   [79;19H[1;84r[84;1H
[1;85r[84;7Hmatch([31m')'[m);[85;140H[K[85;140H86,19[9C12%[79;19H[?25h[?25l[85;130H~@k[79;19H[85;130H   [79;5H[1;84r[84;1H
[1;85r[75;23H[36m[46m{[79;5H}[m[84;7H[33mreturn[m value;[85;140H[K[85;140H87,5[10C13%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;10H[1;84r[84;1H
[1;85r[74;23H[36m{[78;5H}[m[79;10H[36m[46m{[84;5H}[m[85;140H[K[85;140H88,10[9C15%[79;10H[?25h[?25l[85;130H~@k[79;10H[85;130H   [79;17H[1;84r[84;1H
[1;85r[78;10H[36m{[83;5H}
[m  [36m}[m[85;140H[K[85;140H89,17[9C17%[79;17H[?25h[?25l[85;130H~@k[79;17H[85;130H   [79;20H[1;84r[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H90,20[9C18%[79;20H[?25h[?25l[85;130H~@k[79;20H[85;130H   [79;17H[1;84r[84;1H
[1;85r[85;140H[K[85;140H91,17[9C20%[79;17H[?25h[?25l[85;130H~@k[79;17H[85;130H   [79;19H[1;84r[84;1H
[1;85r[85;140H[K[85;140H92,19[9C22%[79;19H[?25h[?25l[1;84r[84;1H
[1;85r[74;10H[36m[46m{[79;5H}[m[84;1H[36mfunction[m scan(text) [36m{[m[85;140H[K[85;140H93,5[10C24%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [78;19H[74;10H[36m{[79;5H}[m[85;141H2,19[78;19H[?25h[?25l[85;130H~@k[78;19H[85;130H   [77;17H[85;141H1,17[77;17H[?25h[?25l[85;130H~@k[77;17H[85;130H   [76;20H[85;141H0,20[76;20H[?25h[?25l[85;130H~@k[76;20H[85;130H   [75;17H[85;140H89,17[75;17H[?25h[?25l[85;130H~@k[75;17H[85;130H   [74;10H[36m[46m{[79;5H}[m[85;141H8,10[74;10H[?25h[?25l[85;130H~@k[74;10H[85;130H   [73;5H[69;23H[36m[46m{[73;5H}[m[74;10H[36m{[79;5H}[m[85;141H7,5 [73;5H[?25h[?25l[85;130H~@k[73;5H[85;130H   [72;19H[69;23H[36m{[73;5H}[m[85;141H6,19[72;19H[?25h[?25l[85;130H~@k[72;19H[85;130H   [71;19H[85;141H5[71;19H[?25h[?25l[85;130H~@k[71;19H[85;130H   [70;20H[85;141H4,20[70;20H[?25h[?25l[85;130H~@k[70;20H[85;130H   [69;20H[46m([5C)[m[85;141H3[69;20H[?25h[?25l[85;130H~@k[69;20H[85;130H   [68;20H[69;14H([5C)[85;141H2[68;20H[?25h[?25l[85;130H~@k[68;20H[85;130H   [67;1H[85;141H1,0-1[67;1H[?25h[?25l[85;130H~@k[67;1H[85;130H   [66;3H[58;19H[36m[46m{[66;3H}[m[85;141H0,3  [66;3H[?25h[?25l[85;130H~@k[66;3H[85;130H   [65;5H[58;19H[36m{[m[63;10H[36m[46m{[65;5H}[m
  [36m}[m[85;140H79,5[65;5H[?25h[?25l[85;130H~@k[65;5H[85;130H   [64;20H[63;10H[36m{[m[64;20H[46m()[m
    [36m}[m[85;141H8,20[64;20H[?25h[?25l[85;130H~@k[64;20H[85;130H   [63;10H[36m[46m{[m[64;20H()
    [36m[46m}[m[85;141H7,1[63;10H[?25h[?25l[85;130H~@k[63;10H[85;130H   [62;5H[59;21H[36m[46m{[62;5H}[m[63;10H[36m{[65;5H}[m[85;141H6,5 [62;5H[?25h[?25l[85;130H~@k[62;5H[85;130H   [61;20H[59;21H[36m{[m[61;20H[46m()[m
    [36m}[m[85;141H5,20[61;20H[?25h[?25l[85;130H~@k[61;20H[85;130H   [60;17H[61;20H()[85;141H4,17[60;17H[?25h[?25l[85;130H~@k[60;17H[85;130H   [59;20H[85;141H3,20[59;20H[?25h[?25l[85;130H~@k[59;20H[85;130H   [58;19H[36m[46m{[66;3H}[m[85;141H2,19[58;19H[?25h[?25l[85;130H~@k[58;19H[85;130H   [57;1H[58;19H[36m{[66;3H}[m[85;141H1,0-1[57;1H[?25h[?25l[85;130H~@k[57;1H[85;130H   [56;3H[43;19H[36m[46m{[56;3H}[m[85;141H0,3  [56;3H[?25h[?25l[85;130H~@k[56;3H[85;130H   [55;13H[43;19H[36m{[56;3H}[m[85;140H69,13[55;13H[?25h[?25l[85;130H~@k[55;13H[85;130H   [54;5H[45;53H[36m[46m{[54;5H}[m[85;141H8,5 [54;5H[?25h[?25l[85;130H~@k[54;5H[85;130H   [53;7H[45;53H[36m{[m[51;12H[36m[46m{[53;7H}[m
    [36m}[m[85;141H7,7[53;7H[?25h[?25l[85;130H~@k[53;7H[85;130H   [52;20H[51;12H[36m{[53;7H}[m[85;141H6,20[52;20H[?25h[?25l[85;130H~@k[52;20H[85;130H   [51;12H[36m[46m{[53;7H}[m[85;141H5,12[51;12H[?25h[?25l[85;130H~@k[51;12H[85;130H   [50;20H[51;12H[36m{[53;7H}[m[85;141H4,13-20[50;20H[?25h[?25l[85;130H~@k[50;20H[85;130H   [50;20H[?25h[?25l[85;130Ha[50;20H[85;130H [50;21H[85;1H[1m-- INSERT --[m[85;140H[K[85;140H64,14-21      24%[50;21H[?25h[?25l[85;141H3,21   [49;21H[?25h[?25l[85;141H4,14-21[50;21H[?25h[?25l[85;141H3,21   [49;21H[?25h[?25l[85;141H4,14-21[50;21H[?25h[?25l[85;141H3,21   [49;21H[?25h[?25l[85;141H4,14-21[50;21H[?25h[?25l[51;84r[51;1H[L[1;85r[85;140H[K[85;140H65,8-15[7C23%[51;15H[?25h[?25l[85;143H7-14[51;14H[?25h[?25l[85;143H6-13[51;13H[?25h[?25l[85;143H5-12[51;12H[?25h[?25l[85;143H4-11[51;11H[?25h[?25l[85;143H3-10[51;10H[?25h[?25l[85;143H2-9 [51;9H[?25h[?25lc[85;143H3-10[51;10H[?25h[?25lo[85;143H4-11[51;11H[?25h[?25ln[85;143H5-12[51;12H[?25h[?25lt[85;143H6-13[51;13H[?25h[?25li[85;143H7-14[51;14H[?25h[?25ln[85;143H8-15[51;15H[?25h[?25lu[85;143H9-16[51;16H[?25h[?25l[51;9H[33mcontinue[m[85;143H10-17[51;17H[?25h[?25l;[85;144H1-18[51;18H[?25h[?25l[52;12H[36m[46m{[54;7H}[m[85;141H6,13   [52;13H[?25h[?25l[36m{[54;7H}[m[85;141H7,18[53;18H[?25h[?25l[52;12H[36m[46m{[54;7H}[m[85;141H8,8 [54;8H[?25h[?25l[55;84r[55;1H[L[1;85r[85;140H[K[85;140H69,6-13[7C23%[52;12H[36m{[54;7H}[55;13H[?25h[?25l[m[85;143H5-12[55;12H[?25h[?25l[85;143H4-11[55;11H[?25h[?25l[85;143H3-10[55;10H[?25h[?25l[85;143H2-9 [55;9H[?25h[?25l[85;143H1  [55;1H[?25h[?25l[54;84r[84;1H
[1;85r[54;7H[36m}[m[85;140H[K[85;140H68,8[10C23%[52;12H[36m[46m{[54;7H}[?25h[?25l[45;53H{[m[52;12H[36m{[54;7H}[m
    [36m[46m}[m[85;141H9,6[55;6H[?25h[?25l[56;84r[56;1H[L[1;85r[85;140H[K[85;140H70,4-11[7C23%[45;53H[36m{[55;5H}[56;11H[?25h[?25l[m[85;143H3-10[56;10H[?25h[?25l[85;143H2-9 [56;9H[?25h[?25l[85;143H1  [56;1H[?25h[?25l[55;84r[84;1H
[1;85r[55;5H[36m}[m[85;140H[K[85;140H69,6[10C23%[45;53H[36m[46m{[55;5H}[?25h[?25l[56;84r[m[56;1H[L[1;85r[85;140H[K[85;140H70,4-11[7C23%[45;53H[36m{[55;5H}[56;11H[?25h[?25l[m[85;143H3-10[56;10H[?25h[?25l[85;143H2-9 [56;9H[?25h[?25l[85;143H1  [56;1H[?25h[?25l[85;143H2[56;2H[?25h[?25l[85;143H3[56;3H[?25h[?25l[85;143H4[56;4H[?25h[?25l[85;143H5[56;5H[?25h[?25lw[85;143H6[56;6H[?25h[?25lh[85;143H7[56;7H[?25h[?25li[85;143H8[56;8H[?25h[?25ll[85;143H9[56;9H[?25h[?25l[33mwhile[m[85;143H10[56;10H[?25h[?25l[85;144H1[56;11H[?25h[?25l([85;144H2[56;12H[?25h[?25lc[85;144H3[56;13H[?25h[?25lh[85;144H4[56;14H[?25h[?25le[85;144H5[56;15H[?25h[?25lc[85;144H6[56;16H[?25h[?25lk[85;144H7[56;17H[?25h[?25l([85;144H8[56;18H[?25h[?25l[31m'[m[85;144H9[56;19H[?25h[?25l[31m*[m[85;143H20[56;20H[?25h[?25l[31m*[m[85;144H1[56;21H[?25h[?25l[31m'[m[85;144H2[56;22H[?25h[?25l)[46m([4C)[m[85;144H3[56;23H[?25h[?25l)[56;11H[46m([mcheck([4C)[46m)[m[85;144H4[56;24H[?25h[?25l[36m{[m[56;11H([11C)[36m[46m{

[m  [36m[46m}[m[85;144H5[56;25H[?25h[?25l[57;84r[57;1H[L[1;85r[58;3H[46m [m
  [36m}[m[85;140H[K[85;140H71,6-13[7C22%[56;24H[36m{[m

   [57;13H[?25h[?25l[58;84r[58;1H[L[1;85r[85;140H[K[85;140H72,6-13[7C22%[58;13H[?25h[?25l    [36m}[m[56;24H[36m[46m{[58;5H}[m[85;144H   [58;6H[?25h[?25l[56;24H[36m{[58;5H}[m[85;141H1,1[57;1H[?25h[?25l[85;143H2-9[57;9H[?25h[?25l[85;140H60,6  [46;6H[?25h[?25l[85;4H[1m(insert)- VISUAL --[m[85;140H[K[85;130H2[46;7H[85;140H60,7[10C22%[46;7H[7m [?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[m[85;130H3[46;8H[7m[33mc[m[85;143H8[46;8H[?25h[?25l[?25h[?25l[?25h[?25l[85;130H2[47;8H[46;8H[7m[33monst[m[7m kind = lookahead.kind; 
      m[m[85;141H1[47;8H[?25h[?25la[7ma[m[85;143H9[47;9H[?25h[?25l[?25h[?25lt[7mt[m[85;143H10[47;10H[?25h[?25l[?25h[?25l[?25h[?25lc[7mc[m[85;144H1[47;11H[?25h[?25l[85;130H3[48;11H[47;11H[7mh(kind);    
      [m[7m[33mcons[m[85;141H2[48;11H[?25h[?25l[?25h[?25l[?25h[?25l[85;130H [48;12H[7m[33mt[m[85;144H2[48;12H[?25h[?25l[85;130H3[48;12H[?25h[?25l[?25h[?25l[?25h[?25l [7m [m[85;144H3[48;13H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25lt[7mt[m[85;144H4[48;14H[?25h[?25l[85;130H [49;14H[48;14H[7m1 = term(); 
      [m[7m[33mif[m[7m(kind[m[85;141H3[49;14H[?25h[?25l[85;130H4[49;14H[?25h[?25l[?25h[?25l [7m [m[85;144H5[49;15H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l=[7m=[m[85;144H6[49;16H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l=[7m=[m[85;144H7[49;17H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[85;130H5[50;18H[49;17H[7m= [m[7m[31m'**'[m[7m)[m[7m[36m{[m[7m 
        t = t ** [m[85;141H4,11-18[50;18H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25lt[7mt[m[85;144H2-19[50;19H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25lt[85;144H1-18[50;18H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l [85;144H0-17[50;17H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l*[85;143H9-16 [50;16H[?25h[?25l[85;130H4[49;16H== [31m'**'[m)[36m{[m[49;25H[K[50;1H        t = t *[85;141H3,16  [49;16H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l=[7m=[m[85;144H7[49;17H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l=[7m=[m[85;144H8[49;18H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[85;130H [49;19H[7m [m[85;144H9[49;19H[?25h[?25l[85;130H4[49;19H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1C[7m[31m'[m[85;143H20[49;20H[?25h[?25l[85;130H3[48;20Hrm();[48;25H[K[49;1H      [33mif[m(kind === [31m'[m[85;141H2[48;20H[?25h[?25lr[7mr[m[85;144H1[48;21H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25lm[7mm[m[46m()[m[85;144H2[48;22H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1C[7m([m[85;144H3[48;23H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1C[7m)[m[85;144H4[48;24H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l;[7m;[m[85;144H5[48;25H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[85;130Hy[48;25H[46;6H [33mconst[m kind = lookahead.kind;[46;35H[K[47;1H      match(kind);   [47;22H[K[48;1H      [33mconst[m t1 = term();[85;13H[1m--S[m[85;15H[K[85;140H60,6[10C22%4 lines yanked [85;140H[K[46;6H[?25h[?25l[85;1H[1m-- INSERT --[m[85;13H[K[85;140H60,6[10C22%[85;140H71,2-9[57;9H[?25h[?25lp[85;143H3-10[57;10H[?25h[?25l[57;9H[K[85;143H2-9 [57;9H[?25h[85;1H[K[57;8H[?25l[85;130H^[[57;8H[85;130H  [57;9H[85;140H71,1-8[8C22%[57;8H[?25h[?25l[85;130Hp[57;8H[85;1H3 more lines[85;130H[K[57;9H[58;84r[58;1H[3L[1;85r[57;10H[33mconst[m kind = lookahead.kind;[58;7Hmatch(kind);[59;7H[33mconst[m t1 = term();[85;1H[K[85;140H71,2-9[8C21%3 more lines[85;140H[K[85;140H71,2-9[8C21%[57;9H[?25h[?25l[85;130Ha[57;9H[85;130H [57;10H[85;1H[1m-- INSERT --[m[85;140H[K[85;140H71,3-10[7C21%[57;10H[?25h[?25l[33mconst[m kind = lookahead.kind;[57;37H[K[85;143H2-9 [57;9H[?25h[?25l[33mconst[m kind = lookahead.kind;[57;29H[K[85;143H1  [57;1H[?25h[?25l        [33mconst[m kind = lookahead.kind;[85;143H2-9[57;9H[?25h[?25l[33mconst[m kind = lookahead.kind;[57;29H[K[85;143H1  [57;1H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H2[57;2H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H3[57;3H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H4[57;4H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H5[57;5H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H6[57;6H[?25h[?25l [33mconst[m kind = lookahead.kind;[85;143H7[57;7H[?25h[?25l[85;141H2[58;7H[?25h[85;1H[K[58;6H[?25l[85;130H^[[58;6H[85;130H  [58;7H[85;140H72,6[10C21%[58;6H[?25h[?25l[85;130Hd[58;6H[?25h[?25l[85;131Hd[58;6H[85;130H  [58;7H[58;84r[84;1H
[1;85r[84;7H[33mreturn[m value;[85;140H[K[85;140H72,7[10C21%[58;7H[?25h[?25l[85;130H~@k[58;7H[85;130H   [57;7H[85;141H1[57;7H[?25h[?25l[85;130Hd[57;7H[?25h[?25l[85;131Hd[57;7H[85;130H  [57;7H[57;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H71,7[10C22%[57;7H[?25h[?25l[85;130H~@k[57;7H[85;130H   [58;1H[85;141H2,0-1[58;1H[?25h[?25l[85;130Ha[58;1H[85;130H [58;1H[85;1H[1m-- INSERT --[m[85;140H[K[85;140H72,1[10C22%[58;1H[?25h[?25l[85;143H2-9[58;9H[?25h[?25lt[85;143H3-10[58;10H[?25h[?25l[85;143H4-11[58;11H[?25h[?25l=[85;143H5-12[58;12H[?25h[?25l[85;143H6-13[58;13H[?25h[?25lt[85;143H7-14[58;14H[?25h[?25l*[85;143H8-15[58;15H[?25h[?25l*[85;143H9-16[58;16H[?25h[?25l[58;15H[K[85;143H8-15[58;15H[?25h[?25l[58;14H[K[85;143H7-14[58;14H[?25h[?25l[85;143H8-15[58;15H[?25h[?25l*[85;143H9-16[58;16H[?25h[?25l*[85;143H10-17[58;17H[?25h[?25l[85;144H1-18[58;18H[?25h[?25lt[85;144H2-19[58;19H[?25h[?25l1[85;144H3-20[58;20H[?25h[?25l2[85;144H4-21[58;21H[?25h[?25l[58;20H[K[85;144H3-20[58;20H[?25h[85;1H[K[58;19H[?25l[85;130H^[[58;19H[85;130H  [58;20H[85;140H72,12-19      22%[58;19H[?25h[?25l[85;130H:[58;19H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"calc.mjs" 147L, 2591C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ vim calc.mjs [12@./calc.mjs expn-data.txt[C
[ [33m64[39m, [33m27[39m, [33m-1[39m ]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ./calc.mjs expn-data.txt [12Pvim calc.mjs[C[12@./calc.mjs expn-data.txt[C[12Pvim calc.mjs[C
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"calc.mjs" 147L, 2591C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m values = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hvalues.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m values;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m{[m[64;9Ht = t ** t1;[65;9H[33mcontinue[m;[66;7H[36m}[m[33melse[m[36m{[m[67;9Ht += (kind === [31m'+'[m) ? t1 : -t1;[68;7H[36m}
[m    [36m}[m
    [33mwhile[m (check([31m'**'[m))[36m{[m[71;7H[33mconst[m t1 = term();[72;9Ht = t ** t1
    [36m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[79;7Hmatch([31m'-'[m);[80;7H[33mreturn[m - term();
    [36m}[m
    [33melse[m [36m{[m[83;7H[33mreturn[m factor();
    [36m}[m[85;140H72,12-19      Top[72;19H[?25h[?1000l[?1002h[?25l[85;130H~@k[72;19H[85;130H   [71;19H[85;141H1,19   [71;19H[?25h[?25l[85;130H~@k[71;19H[85;130H   [70;19H[85;141H0[70;19H[?25h[?25l[85;130H~@k[70;19H[85;130H   [69;5H[59;53H[36m[46m{[69;5H}[m[85;140H69,5 [69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [68;7H[59;53H[36m{[m[66;12H[36m[46m{[68;7H}[m
    [36m}[m[85;141H8,7[68;7H[?25h[?25l[85;130H~@k[68;7H[85;130H   [67;19H[66;12H[36m{[68;7H}[m[85;141H7,19[67;19H[?25h[?25l[85;130H~@k[67;19H[85;130H   [66;12H[36m[46m{[68;7H}[m[85;141H6,12[66;12H[?25h[?25l[85;130H~@k[66;12H[85;130H   [65;17H[66;12H[36m{[68;7H}[m[85;141H5,10-17[65;17H[?25h[?25l[85;130H~@k[65;17H[85;130H   [64;19H[85;141H4,12-19[64;19H[?25h[?25l[85;130H~@k[64;19H[85;130H   [64;18H[85;144H1-18[64;18H[?25h[?25l[85;130H~@k[64;18H[85;130H   [64;17H[85;144H0-17[64;17H[?25h[?25l[85;130H~@k[64;17H[85;130H   [64;16H[85;143H9-16 [64;16H[?25h[?25l[85;130H~@k[64;16H[85;130H   [64;15H[85;143H8-15[64;15H[?25h[?25l[85;130H~@k[64;15H[85;130H   [64;14H[85;143H7-14[64;14H[?25h[?25l[85;130H~@k[64;14H[85;130H   [64;13H[85;143H6-13[64;13H[?25h[?25l[85;130H~@k[64;13H[85;130H   [64;12H[85;143H5-12[64;12H[?25h[?25l[85;130H~@k[64;12H[85;130H   [64;11H[85;143H4-11[64;11H[?25h[?25l[85;130H~@k[64;11H[85;130H   [64;10H[85;143H3-10[64;10H[?25h[?25l[85;130H~@k[64;10H[85;130H   [64;9H[85;143H2-9 [64;9H[?25h[?25l[85;130Ha[64;9H[85;130H [64;10H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H64,3-10[7CTop[64;10H[?25h[?25l[85;143H2-9 [64;9H[?25h[?25l/t = t ** t1;[85;143H3-10[64;10H[?25h[?25l[34m//t = t ** t1;[m[85;143H4-11[64;11H[?25h[85;1H[K[64;10H[?25l[85;130H^[[64;10H[85;130H  [64;11H[85;140H64,3-10[7CTop[64;10H[?25h[?25l[85;130H:[64;10H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"calc.mjs" 147L, 2593C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ vim calc.mjs [12@./calc.mjs expn-data.txt[C
[ [33m-2[39m, [33m3[39m, [33m-1[39m ]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ./calc.mjs expn-data.txt [12Pvim calc.mjs[C
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"calc.mjs" 147L, 2593C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m values = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hvalues.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m values;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m{[m[64;9H[34m//t = t ** t1;[m[65;9H[33mcontinue[m;[66;7H[36m}[m[33melse[m[36m{[m[67;9Ht += (kind === [31m'+'[m) ? t1 : -t1;[68;7H[36m}
[m    [36m}[m
    [33mwhile[m (check([31m'**'[m))[36m{[m[71;7H[33mconst[m t1 = term();[72;9Ht = t ** t1
    [36m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[79;7Hmatch([31m'-'[m);[80;7H[33mreturn[m - term();
    [36m}[m
    [33melse[m [36m{[m[83;7H[33mreturn[m factor();
    [36m}[m[85;140H64,3-10[7CTop[64;10H[?25h[?1000l[?1002h[?25l[85;130H~@k[64;10H[85;130H   [65;10H[85;141H5[65;10H[?25h[?25l[85;130H~@k[65;10H[85;130H   [64;10H[85;141H4[64;10H[?25h[?25l[85;130Ha[64;10H[85;130H [64;11H[85;1H[1m-- INSERT --[m[85;13H[K[85;140H64,4-11[7CTop[64;11H[?25h[?25l/t = t ** t1;[64;22H[K[85;143H3-10[64;10H[?25h[?25lt = t ** t1;[64;21H[K[85;143H2-9 [64;9H[?25h[?25l[85;141H5[65;9H[?25h[?25l[85;141H6,9  [66;9H[?25h[?25l[85;141H7[67;9H[?25h[?25l[66;12H[36m[46m{[68;7H}[m[85;141H8,8[68;8H[?25h[?25l[59;53H[36m[46m{[m[66;12H[36m{[68;7H}[m
    [36m[46m}[m[85;141H9,6[69;6H[?25h[?25l[59;53H[36m{[69;5H}[m[85;140H70,9[70;9H[?25h[?25l[85;141H1[71;9H[?25h[?25l[1;84r[1;1H[3M[1;85r[82;3H[36m}

[m  [36mfunction[m factor() [36m{[m[85;140H[K[85;140H71,9[11C4%[68;9H[?25h[?25l[1;84r[1;1H[3M[1;85r[82;5H[33mif[m (check([31m'INT'[m)) [36m{[m[83;7H[33mconst[m value = parseInt(lookahead.lexeme);[84;7Hmatch([31m'INT'[m);[85;140H[K[85;140H71,9[11C9%[65;9H[?25h[?25l[1;84r[1;1H[3L[1;85r[1;1H[33mimport[m Path from [31m'path'[m;[85;140H[K[85;140H71,9[11C4%[68;9H[?25h[?25l[1;84r[1;1H[3L[1;85r[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;[85;140H[K[85;140H71,9[10CTop[71;9H[?25h[?25l[85;140H[K[85;140H71,9[10CTop[71;9H[?25h[?25l[85;140H[K[85;140H71,9[10CTop[71;9H[?25h[?25l[70;11H[46m([11C)[m[85;141H0,12[70;12H[?25h[85;1H[K[70;11H[?25l[85;130H^[[70;11H[85;130H  [70;12H[85;140H70,11[9CTop[70;11H[?25h[?25l[85;130Hd[70;11H[?25h[?25l[85;131Hd[70;11H[85;130H  [70;7H[70;84r[84;1H
[1;85r[84;3H[36m}[m[85;140H[K[85;140H70,7[10CTop[70;7H[?25h[?25l[85;130Hd[70;7H[?25h[?25l[85;131Hd[70;7H[85;130H  [70;9H[70;84r[84;1H
[1;85r[85;140H[K[85;140H70,2-9[8CTop[70;9H[?25h[?25l[85;130Hd[70;9H[?25h[?25l[85;131Hd[70;9H[85;130H  [70;5H[57;84r[84;1H
[1;85r[57;3H[36mfunction[m expr() [36m[46m{[m
    [36mlet[m t = term();[58;20H[K[59;5H[33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);   [61;22H[K[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m{[m[64;9Ht = t ** t1;[65;7H  [33mcontinue[m;[66;7H[36m}[m[33melse[m[36m{[m[66;14H[K[67;7H  t += (kind === [31m'+'[m) ? t1 : -t1;
      [36m}
[m    [36m}[m[69;9H[K[70;5H[36m[46m}[m[84;3H[36mfunction[m factor() [36m{[m[85;140H[K[85;140H70,5[10CTop[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [69;5H[57;19H[36m{[m[59;53H[36m[46m{[69;5H}[m
    [36m}[m[85;140H69[69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [70;5H[57;19H[36m[46m{[m[59;53H[36m{[69;5H}[m
    [36m[46m}[m[85;140H70[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [69;5H[57;19H[36m{[m[59;53H[36m[46m{[69;5H}[m
    [36m}[m[85;140H69[69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [70;5H[57;19H[36m[46m{[m[59;53H[36m{[69;5H}[m
    [36m[46m}[m[85;140H70[70;5H[?25h[?25l[85;130Hd[70;5H[?25h[?25l[85;131Hd[70;5H[85;130H  [70;5H[57;84r[84;1H
[1;85r[57;3H[36mfunction[m expr() [36m{
[m    [36mlet[m t = term();[58;20H[K[59;5H[33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);   [61;22H[K[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m{[m[64;9Ht = t ** t1;[65;7H  [33mcontinue[m;[66;7H[36m}[m[33melse[m[36m{[m[66;14H[K[67;7H  t += (kind === [31m'+'[m) ? t1 : -t1;
      [36m}
[m    [36m}[m[84;5H[33mif[m (check([31m'INT'[m)) [36m{[m[85;140H[K[85;140H70,5[10CTop[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [69;5H[59;53H[36m[46m{[69;5H}[m[85;140H69[69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [68;5H[59;53H[36m{[69;5H}[m[85;141H8[68;5H[?25h[?25l[85;130H~@k[68;5H[85;130H   [67;5H[85;141H7[67;5H[?25h[?25l[85;130H~@k[67;5H[85;130H   [66;5H[85;141H6[66;5H[?25h[?25l[85;130H~@k[66;5H[85;130H   [66;6H[85;143H6[66;6H[?25h[?25l[85;130H~@k[66;6H[85;130H   [65;8H[85;141H5,1-8[65;8H[?25h[?25l[85;130H~@k[65;8H[85;130H   [65;9H[85;143H2-9[65;9H[?25h[?25l[85;130Hd[65;9H[?25h[?25l[85;131Hd[65;9H[85;130H  [65;7H[63;84r[84;1H
[1;85r[63;7H[33mif[m(kind === [31m'**'[m)[36m[46m{[m[64;9Ht = t ** t1;[65;7H[36m[46m}[m[84;7H[33mconst[m value = parseInt(lookahead.lexeme);[85;140H[K[85;140H65,7[10CTop[65;7H[?25h[?25l[85;130H^[[65;7H[85;130H  [65;7H[85;130H^[[65;7H[85;130H  [65;7H[?25h[?25l[85;130H:[65;7H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"calc.mjs" 142L, 2511C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ clear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ clearvim calc.mjs [12@./calc.mjs expn-data.txt[C
[ [33m64[39m, [33m27[39m, [33m-1[39m ]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ./calc.mjs expn-data.txt clear[Kvim calc.mjs [12@./calc.mjs expn-data.txt[C[12Pvim calc.mjs[C
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"calc.mjs" 142L, 2511C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m values = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hvalues.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m values;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m) || check([31m'**'[m)) [36m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7H[33mif[m(kind === [31m'**'[m)[36m[46m{[m[64;9Ht = t ** t1;[65;7H[36m[46m}[m[33melse[m[36m{[m[66;9Ht += (kind === [31m'+'[m) ? t1 : -t1;[67;7H[36m}
[m    [36m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[74;7Hmatch([31m'-'[m);[75;7H[33mreturn[m - term();
    [36m}[m
    [33melse[m [36m{[m[78;7H[33mreturn[m factor();
    [36m}
[m  [36m}

[m  [36mfunction[m factor() [36m{[m
    [33mif[m (check([31m'INT'[m)) [36m{[m[84;7H[33mconst[m value = parseInt(lookahead.lexeme);[85;140H65,7[10CTop[65;7H[?25h[?1000l[?1002h[?25l[59;53H[36m[46m{[m[63;24H[36m{[65;7H}[m[68;5H[36m[46m}[m[85;141H8,5[68;5H[?25h[?25l[59;53H[36m{[68;5H}[m[85;141H4,13-20[64;20H[?25h[?25l[85;141H2,24   [62;24H[?25h[?25l[63;24H[36m[46m{[65;7H}[m[85;141H3[63;24H[?25h[?25l[36m{[65;7H}[m[85;141H2[62;24H[?25h[?25l[63;24H[36m[46m{[65;7H}[m[85;141H3[63;24H[?25h[?25l[36m{[65;7H}[m[85;141H4,13-20[64;20H[?25h[?25l[85;130H^[[64;20H[85;130H  [64;20H[85;130H^[[64;20H[85;130H  [64;20H[?25h[?25l[85;130H:[64;20H[85;1H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[85;1H[K[85;1H[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ clear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ cd ..[K[K[K[K[Kclearvim calc.mjs [12@./calc.mjs expn-data.txt[C
[ [33m64[39m, [33m27[39m, [33m-1[39m ]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/calc$ ./calc.mjs expn-data.txt clear[Kvim calc.mjs [12@./calc.mjs expn-data.txt[C[12Pvim calc.mjs[C[8Pclear./calc.mjs expn-data.txt [Kcd ..
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ clea[K[K[K[Kclear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises$ gi[K[Kcd ast/
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ;[Kls
ast.mjs  ast.py  data.json  data.txt  expn-data.json  expn-data.txt
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ vim ast.mjs 
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;85r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[85;1H"ast.mjs" 142L, 2490C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H#!/usr/bin/env node

[33mimport[m fs from [31m'fs'[m;
[33mimport[m Path from [31m'path'[m;


[34m/* 
program
  : expr ';' program
  | #empty
  ;
expr
  : term ( ( '+' | '-' ) term )*
  ;
term
  : '-' term
  | factor
  ;
factor
  : INT
  | '(' expr ')'
  ;
*/[m

[36mfunction[m parse(text) [36m{[m
  [33mconst[m tokens = scan(text);
  [36mlet[m index = 0;
  [36mlet[m lookahead = nextToken();
  [33mconst[m value = program();
  [33mreturn[m value;

  [36mfunction[m check(kind) [36m{[m [33mreturn[m lookahead.kind === kind; [36m}
[m  [36mfunction[m match(kind) [36m{[m
    [33mif[m (check(kind)) [36m{[m[35;7Hlookahead = nextToken();
    [36m}[m
    [33melse[m [36m{[m[38;7Hconsole.error([31m`expecting [m[35m${kind}[m[31m at [m[35m${lookahead.kind}[m[31m`[m);[39;7Hprocess.exit();
    [36m}
[m  [36m}
[m  [36mfunction[m nextToken() [36m{[m
    [33mreturn[m ([44;7H(index >=  tokens.length) ? [33mnew[m Token([31m'EOF'[m, [31m'<EOF>'[m) : tokens[36m[[mindex++[36m][m
    );
  [36m}

[m  [36mfunction[m program() [36m{[m
    [33mconst[m asts = [36m[][m;
    [33mwhile[m (!check([31m'EOF'[m)) [36m{[m[51;7Hasts.push(expr());[52;7Hmatch([31m';'[m);
    [36m}[m
    [33mreturn[m asts;
  [36m}

[m  [36mfunction[m expr() [36m{
[m    [36mlet[m t = term();
    [33mwhile[m (check([31m'+'[m) || check([31m'-'[m)) [36m[46m{[m[60;7H[33mconst[m kind = lookahead.kind;[61;7Hmatch(kind);[62;7H[33mconst[m t1 = term();[63;7Ht = [33mnew[m Ast(kind, t, t1);
    [36m[46m}[m
    [33mreturn[m t;
  [36m}

[m  [36mfunction[m term() [36m{[m
    [33mif[m (check([31m'-'[m)) [36m{[m[70;7Hmatch([31m'-'[m);[71;7H[33mreturn[m [33mnew[m Ast([31m'-'[m, term());
    [36m}[m
    [33melse[m [36m{[m[74;7H[33mreturn[m factor();
    [36m}
[m  [36m}

[m  [36mfunction[m factor() [36m{[m
    [33mif[m (check([31m'INT'[m)) [36m{[m[80;7H[33mconst[m value = parseInt(lookahead.lexeme);[81;7Hmatch([31m'INT'[m);[82;7H[33mconst[m ast = [33mnew[m Ast([31m'INT'[m);[83;7Hast.value = value;[84;7H[33mreturn[m ast;[85;140H64,5[10CTop[64;5H[?25h[?1000l[?1002h[?25l[85;130H~@k[64;5H[85;130H   [65;5H[59;38H[36m{[64;5H}[m[85;141H5[65;5H[?25h[?25l[85;130H~@k[65;5H[85;130H   [66;3H[57;19H[36m[46m{[66;3H}[m[85;141H6,3[66;3H[?25h[?25l[85;130H~@k[66;3H[85;130H   [67;1H[57;19H[36m{[66;3H}[m[85;141H7,0-1[67;1H[?25h[?25l[85;130H~@k[67;1H[85;130H   [68;5H[85;141H8,5  [68;5H[?25h[?25l[85;130H~@k[68;5H[85;130H   [69;5H[85;141H9[69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [70;5H[85;140H70[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [71;5H[85;141H1[71;5H[?25h[?25l[85;130H~@k[71;5H[85;130H   [72;5H[69;21H[36m[46m{[72;5H}[m[85;141H2[72;5H[?25h[?25l[85;130H~@k[72;5H[85;130H   [73;5H[69;21H[36m{[72;5H}[m[85;141H3[73;5H[?25h[?25l[85;130H~@k[73;5H[85;130H   [74;5H[85;141H4[74;5H[?25h[?25l[85;130H~@k[74;5H[85;130H   [75;5H[73;10H[36m[46m{[75;5H}[m[85;141H5[75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [76;3H[68;19H[36m[46m{[m[73;10H[36m{[75;5H}[m
  [36m[46m}[m[85;141H6,3[76;3H[?25h[?25l[85;130H~@k[76;3H[85;130H   [77;1H[68;19H[36m{[76;3H}[m[85;141H7,0-1[77;1H[?25h[?25l[85;130H~@k[77;1H[85;130H   [78;5H[85;141H8,5  [78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [79;5H[85;141H9[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;1H[K[85;140H80,5[11C1%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[33melse[m [36m{[m[85;140H[K[85;140H81,5[11C3%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Hmatch([31m'('[m);[85;140H[K[85;140H82,5[11C5%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7H[33mconst[m value = expr();[85;140H[K[85;140H83,5[11C6%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Hmatch([31m')'[m);[85;140H[K[85;140H84,5[11C8%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[73;23H[36m[46m{[79;5H}[m[84;7H[33mreturn[m value;[85;140H[K[85;140H85,5[10C10%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[72;23H[36m{[78;5H}[84;5H}[m[85;140H[K[85;140H86,5[10C12%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;3H[36m}[m[85;140H[K[85;140H87,5[10C13%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H88,5[10C15%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[85;140H[K[85;140H89,5[10C17%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[85;140H[K[85;140H90,5[10C18%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[74;10H[36m[46m{[79;5H}[m[84;1H[36mfunction[m scan(text) [36m{[m[85;140H[K[85;140H91,5[10C20%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;3H[1;84r[84;1H
[1;85r[65;21H[36m[46m{[m[73;10H[36m{[78;5H}[m
  [36m[46m}[m[84;3H[33mconst[m tokens = [36m[][m;[85;140H[K[85;140H92,3[10C22%[79;3H[?25h[?25l[85;130H~@k[79;3H[85;130H   [79;1H[1;84r[84;1H
[1;85r[11;22H[36m[46m{[m[64;21H[36m{[78;3H}[m
[36m[46m}[m[84;3H[33mwhile[m (text.length > 0) [36m{[m[85;140H[K[85;140H93,1[10C24%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[10;22H[36m{[78;1H}[84;5Hlet[m m;[85;140H[K[85;140H94,0-1[8C25%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;1H[1;84r[84;1H
[1;85r[84;5H[33mif[m ((m = text.match(/^[36m\[ms+/))) [36m{[m[85;140H[K[85;140H95,0-1[8C27%[79;1H[?25h[?25l[85;130H~@k[79;1H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H96,5[10C29%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[33melse[m [33mif[m ((m = text.match(/^[36m\[md+/))) [36m{[m[85;140H[K[85;140H97,5[10C31%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;7Htokens.push([33mnew[m Token([31m'INT'[m, m[36m[[m0[36m][m));[85;140H[K[85;140H98,5[10C32%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H99,5[10C34%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [79;5H[1;84r[84;1H
[1;85r[84;5H[33melse[m [36m{[m[85;140H[K[85;140H100,5[9C36%[79;5H[?25h[?25l[85;130H~@k[79;5H[85;130H   [78;5H[85;140H99,5 [78;5H[?25h[?25l[85;130H~@k[78;5H[85;130H   [77;5H[85;141H8[77;5H[?25h[?25l[85;130H~@k[77;5H[85;130H   [76;5H[85;141H7[76;5H[?25h[?25l[85;130H~@k[76;5H[85;130H   [75;5H[85;141H6[75;5H[?25h[?25l[85;130H~@k[75;5H[85;130H   [74;1H[85;141H5,0-1[74;1H[?25h[?25l[85;130H~@k[74;1H[85;130H   [73;1H[85;141H4[73;1H[?25h[?25l[85;130H~@k[73;1H[85;130H   [72;1H[4;22H[36m[46m{[72;1H}[m[85;141H3,1  [72;1H[?25h[?25l[85;130H~@k[72;1H[85;130H   [71;3H[4;22H[36m{[m[57;21H[36m[46m{[71;3H}[m
[36m}[m[85;141H2,3[71;3H[?25h[?25l[85;130H~@k[71;3H[85;130H   [70;5H[57;21H[36m{[m[65;10H[36m[46m{[70;5H}[m
  [36m}[m[85;141H1,5[70;5H[?25h[?25l[85;130H~@k[70;5H[85;130H   [69;5H[65;10H[36m{[70;5H}[m[85;141H0[69;5H[?25h[?25l[85;130H~@k[69;5H[85;130H   [68;5H[85;140H89[68;5H[?25h[?25l[85;130H~@k[68;5H[85;130H   [67;5H[85;141H8[67;5H[?25h[?25l[85;130H~@k[67;5H[85;130H   [66;5H[85;141H7[66;5H[?25h[?25l[85;130H~@k[66;5H[85;130H   [65;5H[85;141H6[65;5H[?25h[?25l[85;130H~@k[65;5H[85;130H   [64;5H[58;23H[36m[46m{[64;5H}[m[85;141H5[64;5H[?25h[?25l[85;130H~@k[64;5H[85;130H   [63;5H[58;23H[36m{[64;5H}[m[85;141H4[63;5H[?25h[?25l[85;130H~@k[63;5H[85;130H   [62;5H[85;141H3[62;5H[?25h[?25l[85;130H~@k[62;5H[85;130H   [61;5H[85;141H2[61;5H[?25h[?25l[85;130H~@k[61;5H[85;130H   [60;5H[85;141H1[60;5H[?25h[?25l[85;130H~@k[60;5H[85;130H   [59;5H[85;141H0[59;5H[?25h[?25l[85;130H~@k[59;5H[85;130H   [58;5H[85;140H79[58;5H[?25h[?25l[85;130H~@k[58;5H[85;130H   [57;5H[85;141H8[57;5H[?25h[?25l[85;130H~@k[57;5H[85;130H   [56;1H[85;141H7,0-1[56;1H[?25h[?25l[85;130H~@k[56;1H[85;130H   [55;3H[47;19H[36m[46m{[55;3H}[m[85;141H6,3  [55;3H[?25h[?25l[85;130H~@k[55;3H[85;130H   [54;5H[47;19H[36m{[m[52;10H[36m[46m{[54;5H}[m
  [36m}[m[85;141H5,5[54;5H[?25h[?25l[85;130H~@k[54;5H[85;130H   [53;5H[52;10H[36m{[54;5H}[m[85;141H4[53;5H[?25h[?25l[85;130H~@k[53;5H[85;130H   [52;5H[85;141H3[52;5H[?25h[?25l[85;130H~@k[52;5H[85;130H   [51;5H[48;21H[36m[46m{[51;5H}[m[85;141H2[51;5H[?25h[?25l[85;130H~@k[51;5H[85;130H   [50;5H[48;21H[36m{[51;5H}[m[85;141H1[50;5H[?25h[?25l[85;130H~@k[50;5H[85;130H   [49;5H[85;141H0[49;5H[?25h[?25l[85;130H~@k[49;5H[85;130H   [48;5H[85;140H69[48;5H[?25h[?25l[85;130H~@k[48;5H[85;130H   [47;5H[85;141H8[47;5H[?25h[?25l[85;130H~@k[47;5H[85;130H   [46;1H[85;141H7,0-1[46;1H[?25h[?25l[85;130H~@k[46;1H[85;130H   [45;3H[36;19H[36m[46m{[45;3H}[m[85;141H6,3  [45;3H[?25h[?25l[85;130H~@k[45;3H[85;130H   [44;5H[36;19H[36m{[45;3H}[m[85;141H5,5[44;5H[?25h[?25l[85;130H~@k[44;5H[85;130H   [43;5H[38;38H[36m[46m{[43;5H}[m[85;141H4[43;5H[?25h[?25l[85;130H~@k[43;5H[85;130H   [42;5H[38;38H[36m{[43;5H}[m[85;141H3[42;5H[?25h[?25l[85;130H~@k[42;5H[85;130H   [41;5H[85;141H2[41;5H[?25h[?25l[85;130H~@k[41;5H[85;130H   [40;5H[85;141H1[40;5H[?25h[?25l[85;130H~@k[40;5H[85;130H   [39;5H[85;141H0[39;5H[?25h[?25l[85;130H~@k[39;5H[85;130H   [38;5H[85;140H59[38;5H[?25h[?25l[85;130H~@k[38;5H[85;130H   [37;5H[85;141H8[37;5H[?25h[?25l[85;130H~@k[37;5H[85;130H   [36;5H[85;141H7[36;5H[?25h[?25l[85;130H~@k[36;5H[85;130H   [36;6H[85;143H6[36;6H[?25h[?25l[85;130H~@k[36;6H[85;130H   [37;6H[85;141H8[37;6H[?25h[?25l[85;130H~@k[37;6H[85;130H   [37;7H[85;143H7[37;7H[?25h[?25l[85;130H~@k[37;7H[85;130H   [38;7H[85;141H9[38;7H[?25h[?25l[85;130H~@k[38;7H[85;130H   [38;8H[85;143H8[38;8H[?25h[?25l[85;130H~@k[38;8H[85;130H   [38;9H[85;143H9[38;9H[?25h[?25l[85;130H~@k[38;9H[85;130H   [38;10H[85;143H10[38;10H[?25h[?25l[85;130H~@k[38;10H[85;130H   [38;11H[46m([24C)[m[85;144H1[38;11H[?25h[?25l[85;130H~@k[38;11H[85;130H   [38;12H([24C)[85;144H2[38;12H[?25h[?25l[85;130H~@k[38;12H[85;130H   [38;13H[85;144H3[38;13H[?25h[?25l[85;130H~@k[38;13H[85;130H   [38;14H[85;144H4[38;14H[?25h[?25l[85;130H~@k[38;14H[85;130H   [38;15H[85;144H5[38;15H[?25h[?25l[85;130H~@k[38;15H[85;130H   [38;16H[85;144H6[38;16H[?25h[?25l[85;130H~@k[38;16H[85;130H   [38;17H[46m([3C)[m[85;144H7[38;17H[?25h[?25l[85;130H~@k[38;17H[85;130H   [38;18H([3C)[85;144H8[38;18H[?25h[?25l[85;130H~@k[38;18H[85;130H   [38;19H[85;144H9[38;19H[?25h[?25l[85;130H~@k[38;19H[85;130H   [38;20H[85;143H20[38;20H[?25h[?25l[85;130H~@k[38;20H[85;130H   [38;21H[46m([3C)[m[85;144H1[38;21H[?25h[?25l[85;130H~@k[38;21H[85;130H   [38;22H([3C)[85;144H2[38;22H[?25h[?25l[85;130H~@k[38;22H[85;130H   [38;23H[85;144H3[38;23H[?25h[?25l[85;130H~@k[38;23H[85;130H   [38;24H[85;144H4[38;24H[?25h[?25l[85;130H~@k[38;24H[85;130H   [38;25H[85;144H5[38;25H[?25h[?25l[85;130H~@k[38;25H[85;130H   [38;26H[85;144H6[38;26H[?25h[?25l[85;130H~@k[38;26H[85;130H   [38;27H[85;144H7[38;27H[?25h[?25l[85;130H~@k[38;27H[85;130H   [38;28H[85;144H8[38;28H[?25h[?25l[85;130H~@k[38;28H[85;130H   [38;29H[85;144H9[38;29H[?25h[?25l[85;130H~@k[38;29H[85;130H   [38;30H[85;143H30[38;30H[?25h[?25l[85;130H~@k[38;30H[85;130H   [38;31H[46m([3C)[m[85;144H1[38;31H[?25h[?25l[85;130H~@k[38;31H[85;130H   [38;32H([3C)[85;144H2[38;32H[?25h[?25l[85;130H~@k[38;32H[85;130H   [38;33H[85;144H3[38;33H[?25h[?25l[85;130H~@k[38;33H[85;130H   [38;34H[85;144H4[38;34H[?25h[?25l[85;130H~@k[38;34H[85;130H   [38;35H[46m([3C)[m[85;144H5[38;35H[?25h[?25l[85;130Ha[38;35H[85;130H [38;36H[85;1H[1m-- INSERT --[m[85;140H[K[85;140H59,36[9C36%[38;11H[46m([m[19C([3C)[46m)[?25h[?25l [m) [36m{[m [46m)[m[85;144H7[38;37H[?25h[?25l[36m[46m}[m) [36m{}[m[46m)[m[85;144H8[38;38H[?25h[?25l)[46m [m[36m{[m[38;40H[K[38;37H[46m)[m [85;144H7[38;37H[?25h[?25l[46m|[m) [36m{[m|[46m)[m[85;144H8[38;38H[?25h[?25l[46m|[m) [36m{[m|[46m)[m[85;144H9[38;39H[?25h[?25l[46m [m) [36m{[m [46m)[m[85;143H40[38;40H[?25h[?25l[46mc[m) [36m{[mc[46m)[m[85;144H1[38;41H[?25h[?25l[46mh[m) [36m{[mh[46m)[m[85;144H2[38;42H[?25h[?25l[46me[m) [36m{[me[46m)[m[85;144H3[38;43H[?25h[?25l[46mc[m) [36m{[mc[46m)[m[85;144H4[38;44H[?25h[?25l[46mk[m) [36m{[mk[46m)[m[85;144H5[38;45H[?25h[?25l[46m([m) [36m{[m[38;11H([34C[46m)[m[85;144H6[38;46H[?25h[?25l[31m[46m'[m[31m) {'[m[31m[46m)[m[85;144H7[38;47H[?25h[?25l[31m[46m*[m[31m) {*[m[31m[46m)[m[85;144H8[38;48H[?25h[?25l[31m[46m*[m[31m) {*[m[31m[46m)[m[85;144H9[38;49H[?25h[?25l[31m[46m'[m) [36m{[m[31m'[m[46m)[m[85;143H50[38;50H[?25h[?25l[1C) [36m{[m[38;11H[46m([m[33C([4C)[46m)[m[85;144H1[38;51H[?25h[?25l[38;11H([39C)[85;140H60,35[39;35H[?25h[?25l[85;141H1,22[40;22H[?25h[?25l[85;141H2,25[41;25H[?25h[?25l[85;141H3,32[42;32H[?25h[?25l[38;53H[36m[46m{[43;5H}[m[85;141H4,6 [43;6H[?25h[?25l[38;53H[36m{[43;5H}[m[85;141H5,14[44;14H[?25h[?25l[36;19H[36m[46m{[45;3H}[m[85;141H6,4 [45;4H[?25h[?25l[36;19H[36m{[45;3H}[m[85;141H7,1[46;1H[?25h[?25l[47;19H[36m[46m{[55;3H}[m[85;141H8,20[47;20H[?25h[?25l[36m{[m[48;21H[36m[46m{[51;5H}[m[55;3H[36m}[m[85;141H9,22[48;22H[?25h[?25l[36m{[51;5H}[m[85;140H70,18[49;18H[?25h[?25l[85;141H1,35[50;35H[?25h[?25l[48;21H[36m[46m{[51;5H}[m[85;141H2,6 [51;6H[?25h[?25l[48;21H[36m{[51;5H}[m[52;10H[36m[46m{[54;5H}[m[85;141H3,11[52;11H[?25h[?25l[36m{[54;5H}[m[85;141H4,23[53;23H[?25h[?25l[52;10H[36m[46m{[54;5H}[m[85;141H5,6 [54;6H[?25h[?25l[47;19H[36m[46m{[m[52;10H[36m{[54;5H}[m
  [36m[46m}[m[85;141H6,4[55;4H[?25h[?25l[47;19H[36m{[55;3H}[m[85;141H7,1[56;1H[?25h[?25l[57;21H[36m[46m{[71;3H}[m[85;141H8,22[57;22H[?25h[?25l[36m{[m[58;23H[36m[46m{[64;5H}[m[71;3H[36m}[m[85;141H9,24[58;24H[?25h[?25l[36m{[64;5H}[m[85;140H80,48[59;48H[?25h[?25l[85;141H1,20[60;20H[?25h[?25l[85;141H2,34[61;34H[?25h[?25l[85;141H3,25[62;25H[?25h[?25l[85;141H4,18[63;18H[?25h[?25l[58;23H[36m[46m{[64;5H}[m[85;141H5,6 [64;6H[?25h[?25l[58;23H[36m{[64;5H}[m[65;10H[36m[46m{[70;5H}[m[85;141H6,11[65;11H[?25h[?25l[36m{[70;5H}[m[85;141H7,18[66;18H[?25h[?25l[85;141H8,2[67;28H[?25h[?25l[85;141H9,1[68;18H[?25h[?25l[85;140H90,20[69;20H[?25h[?25l[65;10H[36m[46m{[70;5H}[m[85;141H1,6 [70;6H[?25h[?25l[57;21H[36m[46m{[m[65;10H[36m{[70;5H}[m
  [36m[46m}[m[85;141H2,4[71;4H[?25h[?25l[4;22H[36m[46m{[m[57;21H[36m{[71;3H}[m
[36m[46m}[m[85;141H3,2[72;2H[?25h[?25l[4;22H[36m{[72;1H}[m[85;141H4,1[73;1H[?25h[?25l[85;141H5[74;1H[?25h[?25l[85;141H6,22[75;22H[?25h[?25l[85;141H7,21[76;21H[?25h[?25l[85;141H8,28[77;28H[?25h[?25l[85;141H9,11[78;11H[?25h[?25l[79;35H[36m[46m{
[m    [36m[46m}[m[85;140H100,36[79;36H[?25h[?25l[1;84r[84;1H
[1;85r[84;7Hm = text.match(/^./);[85;140H[K[85;140H101,6[9C37%[79;6H[?25h[?25l[1;84r[84;1H
[1;85r[84;7Htokens.push([33mnew[m Token(m[36m[[m0[36m][m, m[36m[[m0[36m][m));[85;140H[K[85;140H102,41[8C39%[77;35H[36m{
[m    [36m}[m[79;40H[36m[46m{[81;5H}[79;41H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;5H[36m}[m[85;140H[K[85;140H103,43[8C41%[78;40H[36m{[80;5H}[79;43H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;5Htext = text.substring(m[36m[[m0[36m][m.length);[85;140H[K[85;140H104,6[9C43%[77;40H[36m[46m{[79;5H}[?25h[?25l[1;84r[m[84;1H
[1;85r[84;3H[36m}[m[85;140H[K[85;140H105,11[8C44%[76;40H[36m{[78;5H}[m[79;10H[36m[46m{[82;5H}[79;11H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;3H[33mreturn[m tokens;[85;140H[K[85;140H106,28[8C46%[78;10H[36m{[81;5H}[79;28H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;1H[36m}[m[85;140H[K[85;140H107,42[8C48%[79;42H[?25h[?25l[1;84r[84;1H
[1;85r[85;140H[K[85;140H108,6[9C50%[76;10H[36m[46m{[79;5H}[?25h[?25l[1;84r[m[84;1H
[1;85r[85;140H[K[85;140H109,40[8C51%[75;10H[36m{[78;5H}[79;40H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;1H[33mconst[m CHAR_SET = [31m'utf8'[m;[85;140H[K[85;140H110,4[9C53%[67;27H[36m[46m{[79;3H}[?25h[?25l[1;84r[m[84;1H
[1;85r[84;1H[36mfunction[m main() [36m{[m[85;140H[K[85;140H111,17[8C55%[66;27H[36m{[78;3H}[79;17H[?25h[?25l[1;84r[m[84;1H
[1;85r[84;3H[33mif[m (process.argv.length !== 3) usage();[85;140H[K[85;140H112,2[9C56%[63;21H[36m[46m{[79;1H}[?25h[?25l[1;84r[m[84;1H
[1;85r[84;3H[33mconst[m file = process.argv[36m[[m2[36m][m;[85;140H[K[85;140H113,1[9C58%[62;21H[36m{[78;1H}
[?25h[?25l[1;84r[m[84;1H
[1;85r[84;3H[33mconst[m text = fs.readFileSync(file, CHAR_SET);[85;140H[K[85;140H114,1[9C60%[79;1H[?25h[?25l[1;84r[84;1H
[1;85r[84;3H[33mconst[m value = parse(text);[85;140H[K[85;140H115,25[8C62%[79;25H[?25h[?25l[85;142H4,1 [78;1H[?25h[?25l[85;142H3[77;1H[?25h[?25l[60;21H[36m[46m{[76;1H}[m[85;142H2,2[76;2H[?25h[?25l[60;21H[36m{[76;1H}[m[85;142H1,17[75;17H[?25h[?25l[62;27H[36m[46m{[74;3H}[m[85;142H0,4 [74;4H[?25h[?25l[62;27H[36m{[74;3H}[m[85;141H09,40[73;40H[?25h[?25l[69;10H[36m[46m{[72;5H}[m[85;142H8,6 [72;6H[?25h[?25l[69;10H[36m{[72;5H}[m[85;142H7,42[71;42H[?25h[?25l[85;142H6,28[70;28H[?25h[?25l[69;10H[36m[46m{[72;5H}[m[85;142H5,11[69;11H[?25h[?25l[66;40H[36m[46m{[68;5H}[m[69;10H[36m{[72;5H}[m[85;142H4,6 [68;6H[?25h[?25l[69;84r[69;1H[L[1;85r[85;140H[K[85;140H105,4-11      61%[66;40H[36m{[68;5H}[69;11H[?25h[?25l[m[85;144H3-10[69;10H[?25h[?25l[85;144H2-9 [69;9H[?25h[?25l[85;144H1  [69;1H[?25h[?25l[85;144H2[69;2H[?25h[?25l[85;144H3[69;3H[?25h[?25l[85;144H4[69;4H[?25h[?25l[85;144H5[69;5H[?25h[?25le[85;144H6[69;6H[?25h[?25ll[85;144H7[69;7H[?25h[?25ls[85;144H8[69;8H[?25h[?25l[33melse[m[85;144H9[69;9H[?25h[?25l[85;144H10[69;10H[?25h[?25lf[85;145H1[69;11H[?25h[?25l[69;10H[K[85;145H0[69;10H[?25h[?25li[85;145H1[69;11H[?25h[?25l[33mif[m[85;145H2[69;12H[?25h[?25l[85;145H3[69;13H[?25h[?25l([85;145H4[69;14H[?25h[?25l([85;145H5[69;15H[?25h[?25lm[85;145H6[69;16H[?25h[?25l[85;145H7[69;17H[?25h[?25l=[85;145H8[69;18H[?25h[?25l[85;145H9[69;19H[?25h[?25lt[85;144H20[69;20H[?25h[?25le[85;145H1[69;21H[?25h[?25lx[85;145H2[69;22H[?25h[?25lt[85;145H3[69;23H[?25h[?25l.[85;145H4[69;24H[?25h[?25lm[85;145H5[69;25H[?25h[?25la[85;145H6[69;26H[?25h[?25lt[85;145H7[69;27H[?25h[?25lc[85;145H8[69;28H[?25h[?25lh[85;145H9[69;29H[?25h[?25l([85;144H30[69;30H[?25h[?25l^[85;145H1[69;31H[?25h[?25l[36m\[m[85;145H2[69;32H[?25h[?25l[69;31H[K[85;145H1[69;31H[?25h[?25l[69;30H[K[85;145H0[69;30H[?25h[?25l/[85;145H1[69;31H[?25h[?25l^[85;145H2[69;32H[?25h[?25l[36m\[m[85;145H3[69;33H[?25h[?25l*[85;145H4[69;34H[?25h[?25l[36m\[m[85;145H5[69;35H[?25h[?25l*[85;145H6[69;36H[?25h[?25l/[85;145H7[69;37H[?25h[?25l)[69;29H[46m([7C)[m[85;145H8[69;38H[?25h[?25l)[69;14H[46m([m[14C([7C)[46m)[m[85;145H9[69;39H[?25h[?25l)[69;13H[46m([m([23C)[46m)[m[85;144H40[69;40H[?25h[?25l[36m{[m[69;13H([25C)[36m[46m{[75;3H}[m[85;145H1[69;41H[?25h[?25l[70;84r[70;1H[L[1;85r[75;3H[46m [m
  [36m}[m[85;140H[K[85;140H106,6-13      60%[69;40H[36m{[m[75;3H [70;13H[?25h[?25l[71;84r[71;1H[L[1;85r[85;140H[K[85;140H107,6-13      59%[71;13H[?25h[?25l    [36m}[m[69;40H[36m[46m{[71;5H}[m[85;145H   [71;6H[?25h[?25l[69;40H[36m{[71;5H}[m[85;142H6,1[70;1H[?25h[?25l[85;144H2-9[70;9H[?25h[?25lr[85;144H3-10[70;10H[?25h[?25l[70;9H[K[85;144H2-9 [70;9H[?25h[?25lt[85;144H3-10[70;10H[?25h[?25lo[85;144H4-11[70;11H[?25h[?25lk[85;144H5-12[70;12H[?25h[?25le[85;144H6-13[70;13H[?25h[?25ln[85;144H7-14[70;14H[?25h[?25ls[85;144H8-15[70;15H[?25h[?25l.[85;144H9-16[70;16H[?25h[?25lp[85;144H10-17[70;17H[?25h[?25lu[85;145H1-18[70;18H[?25h[?25ls[85;145H2-19[70;19H[?25h[?25lh[85;145H3-20[70;20H[?25h[?25l([85;145H4-21[70;21H[?25h[?25l[70;20H[K[85;145H3-20[70;20H[?25h[?25l([85;145H4-21[70;21H[?25h[?25ln[85;145H5-22[70;22H[?25h[?25le[85;145H6-23[70;23H[?25h[?25l[33mnew[m[85;145H7-24[70;24H[?25h[?25l[85;145H8-25[70;25H[?25h[?25lT[85;145H9-26[70;26H[?25h[?25lo[85;144H20-27[70;27H[?25h[?25le[85;145H1-28[70;28H[?25h[?25l[70;27H[K[85;145H0-27[70;27H[?25h[?25lk[85;145H1-28[70;28H[?25h[?25le[85;145H2-29[70;29H[?25h[?25ln[85;145H3-30[70;30H[?25h[?25l([85;145H4-31[70;31H[?25h[?25lm[85;145H5-32[70;32H[?25h[?25l[36m[[m[85;145H6-33[70;33H[?25h[?25l0[85;145H7-34[70;34H[?25h[?25l[36m][m[36m[46m[[m0[36m[46m][m[85;145H8-35[70;35H[?25h[?25l,[36m[[m0[36m][m[85;145H9-36[70;36H[?25h[?25l[85;144H30-37[70;37H[?25h[?25lm[85;145H1-38[70;38H[?25h[?25l[36m[[m[85;145H2-39[70;39H[?25h[?25l0[85;145H3-40[70;40H[?25h[?25l[36m][m[36m[46m[[m0[36m[46m][m[85;145H4-41[70;41H[?25h[?25l)[70;30H[46m([m[7C[36m[[m0[36m][m[46m)[m[85;145H5-42[70;42H[?25h[?25l)[70;20H[46m([m[9C([10C)[46m)[m[85;145H6-43[70;43H[?25h[?25l;[70;20H([21C)[85;145H7-44[70;44H[?25h[85;1H[K[70;43H[?25l[85;130H^[[70;43H[85;130H  [70;44H[85;140H106,36-43     59%[70;43H[?25h[?25l[85;130H:[70;43H[85;130H[K[85;1H:[?2004h[?25hx[?25l[?25h[?25l[?1002l[?2004l"ast.mjs" 145L, 2589C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0tkmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ clear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ./ast.mjs 
usage: ast.mjs INPUT_FILE
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ./ast.mjs s[Ks[Kdata.
data.json  data.txt   
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ./ast.mjs data.
data.json  data.txt   
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ./ast.mjs data.txt 
[{"tag":"-","kids":[{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]},{"tag":"INT","kids":[],"value":3}]},{"tag":"-","kids":[{"tag":"-","kids":[{"tag":"-","kids":[{"tag":"INT","kids":[],"value":2}]}]},{"tag":"-","kids":[{"tag":"INT","kids":[],"value":3},{"tag":"INT","kids":[],"value":4}]}]}]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ ./ast.mjs data.txt [C[C[C[C[C[C[C[C[Ca[K[K[K[K[K[K[K[K[K[Kexpn-data.txt 
[{"tag":"**","kids":[{"tag":"**","kids":[{"tag":"-","kids":[{"tag":"INT","kids":[],"value":2}]},{"tag":"INT","kids":[],"value":2}]},{"tag":"INT","kids":[],"value":3}]},{"tag":"**","kids":[{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]}]},{"tag":"**","kids":[{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"-","kids":[{"tag":"INT","kids":[],"value":2}]}]},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]}]}]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ python -m json.tool data.json 
[
    {
        "kids": [
            {
                "kids": [
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 1
                    },
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 2
                    }
                ],
                "tag": "+"
            },
            {
                "kids": [],
                "tag": "INT",
                "value": 3
            }
        ],
        "tag": "-"
    },
    {
        "kids": [
            {
                "kids": [
                    {
                        "kids": [
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 2
                            }
                        ],
                        "tag": "-"
                    }
                ],
                "tag": "-"
            },
            {
                "kids": [
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 3
                    },
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 4
                    }
                ],
                "tag": "-"
            }
        ],
        "tag": "-"
    }
]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ python -m json.tool data.json [C[C[C[C[1P [1P [1P [1P [1P [1P [1P [1P [1P e xpn-data. j son 
[
    {
        "kids": [
            {
                "kids": [
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 2
                    },
                    {
                        "kids": [
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 2
                            },
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 3
                            }
                        ],
                        "tag": "**"
                    }
                ],
                "tag": "**"
            }
        ],
        "tag": "-"
    },
    {
        "kids": [
            {
                "kids": [],
                "tag": "INT",
                "value": 1
            },
            {
                "kids": [
                    {
                        "kids": [],
                        "tag": "INT",
                        "value": 2
                    },
                    {
                        "kids": [
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 1
                            },
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 2
                            }
                        ],
                        "tag": "+"
                    }
                ],
                "tag": "**"
            }
        ],
        "tag": "+"
    },
    {
        "kids": [
            {
                "kids": [],
                "tag": "INT",
                "value": 1
            },
            {
                "kids": [
                    {
                        "kids": [
                            {
                                "kids": [],
                                "tag": "INT",
                                "value": 2
                            },
                            {
                                "kids": [
                                    {
                                        "kids": [],
                                        "tag": "INT",
                                        "value": 1
                                    },
                                    {
                                        "kids": [],
                                        "tag": "INT",
                                        "value": 2
                                    }
                                ],
                                "tag": "+"
                            }
                        ],
                        "tag": "**"
                    }
                ],
                "tag": "-"
            }
        ],
        "tag": "+"
    }
]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ cat expn-data.json 
[{"tag":"-","kids":[{"tag":"**","kids":[{"tag":"INT","kids":[],"value":2},{"tag":"**","kids":[{"tag":"INT","kids":[],"value":2},{"tag":"INT","kids":[],"value":3}]}]}]},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"**","kids":[{"tag":"INT","kids":[],"value":2},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]}]}]},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"-","kids":[{"tag":"**","kids":[{"tag":"INT","kids":[],"value":2},{"tag":"+","kids":[{"tag":"INT","kids":[],"value":1},{"tag":"INT","kids":[],"value":2}]}]}]}]}]
kmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ clear
[H[2J[3Jkmoshie1@remote07:~/i471a/submit/lab1/exercises/ast$ cd ..
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ ls
01-regex  02-lexer  03-calc  04-ast  ast  calc	lexer  regex
kmoshie1@remote07:~/i471a/submit/lab1/exercises$ cd ..
kmoshie1@remote07:~/i471a/submit/lab1$ exit

Script done on 2021-02-25 19:55:52-05:00 [COMMAND_EXIT_CODE="0"]
